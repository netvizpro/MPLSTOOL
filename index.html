<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>VRF Route-Target Traffic Flow Analyzer | Network Engineering Tools</title>
    <meta name="description"
        content="Professional VRF Route-Target analyzer with animated traffic flow and interactive MPLS configuration templates.">
    <meta name="keywords"
        content="VRF, Route Target, MPLS VPN, Network Analysis, BGP, MPLS-TE, QoS, Network Engineering">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1e3a8a;
            /* Fallback for older browsers */
            background: -webkit-linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            background: -moz-linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            background: -o-linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .top-nav {
            max-width: 1800px;
            margin: 0 auto 20px auto;
            background: white;
            border-radius: 15px;
            padding: 15px 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-brand {
            font-size: 1.4em;
            font-weight: bold;
            background: #1e3a8a;
            /* Fallback */
            background: -webkit-linear-gradient(135deg, #1e3a8a, #3b82f6);
            background: -moz-linear-gradient(135deg, #1e3a8a, #3b82f6);
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            -moz-text-fill-color: transparent;
            text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-link {
            color: #1e3a8a;
            text-decoration: none;
            padding: 8px 18px;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 0.95em;
            position: relative;
        }

        .nav-link:hover {
            background: #eff6ff;
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
        }

        .nav-link.more-tools::after {
            content: 'Coming Soon';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(5px);
            background: #1e3a8a;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .nav-link.more-tools:hover::after {
            opacity: 1;
            transform: translateX(-50%) translateY(10px);
        }

        /* Buy Me A Coffee Button Styles */
        .coffee-btn {
            background: linear-gradient(135deg, #FFDD00 0%, #FBB034 100%);
            color: #000000;
            text-decoration: none;
            padding: 12px 28px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(251, 176, 52, 0.4);
            border: none;
            cursor: pointer;
        }

        .coffee-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251, 176, 52, 0.6);
            background: linear-gradient(135deg, #FBB034 0%, #FFDD00 100%);
        }

        .coffee-btn svg {
            width: 10px;
            height: 22px;
            fill: currentColor;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            -webkit-animation: fadeIn 0.3s ease-out;
            -moz-animation: fadeIn 0.3s ease-out;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            -webkit-animation: slideDown 0.4s ease-out;
            -moz-animation: slideDown 0.4s ease-out;
            animation: slideDown 0.4s ease-out;
            overflow: hidden;
        }

        @keyframes slideDown {
            from {
                -webkit-transform: translateY(-50px);
                -moz-transform: translateY(-50px);
                -ms-transform: translateY(-50px);
                -o-transform: translateY(-50px);
                transform: translateY(-50px);
                opacity: 0;
            }

            to {
                -webkit-transform: translateY(0);
                -moz-transform: translateY(0);
                -ms-transform: translateY(0);
                -o-transform: translateY(0);
                transform: translateY(0);
                opacity: 1;
            }
        }

        @-webkit-keyframes slideDown {
            from {
                -webkit-transform: translateY(-50px);
                opacity: 0;
            }

            to {
                -webkit-transform: translateY(0);
                opacity: 1;
            }
        }

        @-moz-keyframes slideDown {
            from {
                -moz-transform: translateY(-50px);
                opacity: 0;
            }

            to {
                -moz-transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: #1e3a8a;
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.6em;
            font-weight: 700;
        }

        .close-modal {
            color: white;
            font-size: 2em;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            line-height: 1;
            transition: all 0.3s;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.2);
            -webkit-transform: rotate(90deg);
            -moz-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
            -o-transform: rotate(90deg);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 30px;
            line-height: 1.8;
            color: #1e293b;
        }

        .modal-body h3 {
            color: #1e3a8a;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
            font-weight: 600;
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p {
            margin: 12px 0;
            font-size: 1em;
        }

        .modal-body ul {
            margin: 15px 0;
            padding-left: 25px;
        }

        .modal-body li {
            margin: 10px 0;
            font-size: 1em;
        }

        .ccie-badge {
            display: inline-block;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            margin: 10px 0;
            font-size: 1.05em;
        }

        .tab-nav {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px 15px 0 0;
            padding: 15px 30px 0 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            gap: 5px;
            overflow-x: auto;
        }

        .tab-button {
            background: #f8fafc;
            color: #64748b;
            border: none;
            padding: 12px 24px;
            border-radius: 10px 10px 0 0;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab-button:hover {
            background: #e2e8f0;
            color: #475569;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            -webkit-animation: slideIn 0.6s ease-out;
            -moz-animation: slideIn 0.6s ease-out;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                -webkit-transform: translateY(-30px);
                -moz-transform: translateY(-30px);
                -ms-transform: translateY(-30px);
                -o-transform: translateY(-30px);
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                -webkit-transform: translateY(0);
                -moz-transform: translateY(0);
                -ms-transform: translateY(0);
                -o-transform: translateY(0);
                transform: translateY(0);
            }
        }

        @-webkit-keyframes slideIn {
            from {
                opacity: 0;
                -webkit-transform: translateY(-30px);
            }

            to {
                opacity: 1;
                -webkit-transform: translateY(0);
            }
        }

        @-moz-keyframes slideIn {
            from {
                opacity: 0;
                -moz-transform: translateY(-30px);
            }

            to {
                opacity: 1;
                -moz-transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.15em;
            opacity: 0.95;
            font-weight: 400;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .privacy-notice {
            background: linear-gradient(135deg, #dcfce7 0%, #86efac 100%);
            border-left: 5px solid #10b981;
            padding: 18px 25px;
            margin: 25px 30px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 18px;
            -webkit-animation: fadeIn 1s ease-out;
            -moz-animation: fadeIn 1s ease-out;
            animation: fadeIn 1s ease-out;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @-webkit-keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @-moz-keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .privacy-notice .icon {
            font-size: 2.2em;
            color: #059669;
        }

        .privacy-notice .text {
            flex: 1;
        }

        .privacy-notice .text strong {
            display: block;
            margin-bottom: 6px;
            color: #065f46;
            font-size: 1.1em;
        }

        .privacy-notice .text p {
            margin: 0;
            color: #047857;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .input-section {
            padding: 35px;
            background: #f9fafb;
            border-bottom: 2px solid #e5e7eb;
        }

        .input-label {
            font-size: 1.3em;
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ios-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .ios-selector label {
            font-size: 1.1em;
            font-weight: 600;
            color: #374151;
        }

        .ios-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .ios-option {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: #f3f4f6;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            font-weight: 500;
        }

        .ios-option:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }

        .ios-option input[type="radio"]:checked+span {
            color: #1e3a8a;
            font-weight: 600;
        }

        .ios-option:has(input[type="radio"]:checked) {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 18px;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            line-height: 1.6;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #374151;
            border: 2px solid #d1d5db;
        }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            transform: translateY(-1px);
        }

        .results-section {
            padding: 35px;
            background: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #3b82f6;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #64748b;
            font-size: 1.1em;
            font-weight: 500;
        }

        .network-section {
            padding: 35px;
            background: #0f172a;
        }

        .network-visualization {
            background: #1e293b;
            border-radius: 15px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            border: 2px solid #334155;
        }

        .network-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(59, 130, 246, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .zoom-btn {
            background: rgba(59, 130, 246, 0.8);
            color: white;
            border: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }

        .zoom-btn:hover {
            background: rgba(59, 130, 246, 1);
            transform: scale(1.1);
        }

        .zoom-level {
            font-size: 0.9em;
            color: white;
            font-weight: 500;
            min-width: 45px;
            text-align: center;
        }

        .network-canvas {
            width: 100%;
            height: 500px;
            background: #0f172a;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 2px solid #475569;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .vrf-node {
            position: absolute;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            z-index: 10;
            user-select: none;
            font-weight: 600;
            font-size: 0.9em;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .vrf-node:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .vrf-node.selected {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.6);
            transform: scale(1.15);
        }

        .connection-line {
            position: absolute;
            background: rgba(59, 130, 246, 0.6);
            height: 2px;
            transform-origin: left center;
            border-radius: 1px;
            z-index: 5;
            transition: all 0.3s;
        }

        .connection-line::after {
            content: '';
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid rgba(59, 130, 246, 0.6);
            border-top: 3px solid transparent;
            border-bottom: 3px solid transparent;
        }

        .connection-line.highlighted {
            background: #f59e0b;
            height: 3px;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.8);
        }

        .connection-line.highlighted::after {
            border-left-color: #f59e0b;
        }

        /* Beautiful VRF segments in chord diagram style */
        .vrf-segment {
            position: absolute;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform, z-index;
        }

        .vrf-segment:hover {
            transform: scale(1.1) !important;
            z-index: 15 !important;
        }

        .vrf-segment.selected .vrf-segment-bar {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #b45309 100%) !important;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.6) !important;
            height: 12px !important;
        }

        .vrf-segment.selected {
            transform: scale(1.15) !important;
            z-index: 20 !important;
        }

        /* Beautiful chord connections */
        .chord-connection {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: stroke-width, opacity, filter;
        }

        .chord-connection:hover {
            stroke-width: 4 !important;
            opacity: 0.9 !important;
            filter: drop-shadow(0 0 8px currentColor) brightness(1.2) !important;
        }

        /* Enhanced network canvas for massive VRF networks */
        .network-canvas {
            width: 100%;
            height: 900px;
            /* Much bigger for impressive viewing */
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 70%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid #475569;
            box-shadow:
                inset 0 4px 12px rgba(0, 0, 0, 0.4),
                0 8px 25px rgba(0, 0, 0, 0.3);
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        /* Premium Matrix Styles */
        .premium-matrix-container {
            overflow-x: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-top: 25px;
            background: white;
            border: 1px solid #e2e8f0;
        }

        .premium-matrix {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95em;
        }

        .premium-matrix th {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            border: 1px solid #334155;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .premium-matrix th:first-child {
            position: sticky;
            left: 0;
            z-index: 20;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        }

        .premium-matrix td {
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            text-align: center;
            transition: all 0.2s;
        }

        .premium-matrix tr:hover td {
            background-color: #f8fafc;
        }

        .premium-matrix .source-cell {
            background: #f1f5f9;
            font-weight: 600;
            color: #334155;
            text-align: left;
            position: sticky;
            left: 0;
            z-index: 5;
            border-right: 2px solid #cbd5e1;
        }

        .premium-matrix .self-cell {
            background: #f8fafc;
            color: #cbd5e1;
        }

        .premium-matrix .bidirectional-cell {
            background: #fef3c7;
            color: #92400e;
            font-weight: bold;
            font-size: 1.2em;
        }

        .premium-matrix .export-cell {
            background: #d1fae5;
            color: #065f46;
            font-weight: bold;
            font-size: 1.2em;
        }

        .premium-matrix .import-cell {
            background: #dbeafe;
            color: #1e40af;
            font-weight: bold;
            font-size: 1.2em;
        }

        .premium-matrix .no-conn-cell {
            color: #cbd5e1;
        }

        .matrix-legend {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 25px;
            flex-wrap: wrap;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95em;
            color: #475569;
            font-weight: 500;
        }

        .legend-box {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Perfect traffic particles for chord flow */
        #trafficParticles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 35;
            overflow: hidden;
        }

        /* Enhanced controls styling */
        .network-controls {
            display: flex;
            gap: 25px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: rgba(34, 211, 238, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Position controls */
        .position-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .position-label {
            font-size: 0.85em;
            color: #94a3b8;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .position-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .position-btn {
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.8) 0%, rgba(8, 145, 178, 0.8) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 8px rgba(34, 211, 238, 0.3);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            user-select: none;
        }

        .position-btn:hover {
            background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 15px rgba(34, 211, 238, 0.5);
        }

        .position-btn:active {
            transform: translateY(0) scale(1);
        }

        .position-btn.center-btn {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.8) 0%, rgba(217, 119, 6, 0.8) 100%);
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .position-btn.center-btn:hover {
            background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.5);
        }

        /* Network info display */
        .network-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: rgba(15, 23, 42, 0.8);
            padding: 12px 16px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .info-label {
            font-size: 0.8em;
            color: #94a3b8;
            font-weight: 600;
        }

        .info-value {
            font-size: 0.85em;
            color: #22d3ee;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(34, 211, 238, 0.1);
            padding: 10px 15px;
            border-radius: 12px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .zoom-btn {
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.8) 0%, rgba(8, 145, 178, 0.8) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 3px 10px rgba(34, 211, 238, 0.3);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .zoom-btn:hover {
            background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(34, 211, 238, 0.5);
        }

        .zoom-btn:active {
            transform: translateY(-1px) scale(1);
        }

        .zoom-level {
            font-size: 1em;
            color: white;
            font-weight: 700;
            min-width: 55px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        /* Animation control styling */
        .btn-secondary {
            background: linear-gradient(135dp, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            color: #e2e8f0;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Legacy particle styles (for compatibility) */
        .traffic-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #10b981 0%, #059669 100%);
            border-radius: 50%;
            z-index: 25;
            box-shadow:
                0 0 12px rgba(16, 185, 129, 0.8),
                0 0 24px rgba(16, 185, 129, 0.4),
                inset 0 0 4px rgba(255, 255, 255, 0.3);
            pointer-events: none;
            will-change: transform, opacity, box-shadow;
            backface-visibility: hidden;
            transform-style: preserve-3d;
        }

        .traffic-particle-enhanced {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            will-change: transform, opacity, box-shadow;
            backface-visibility: hidden;
            transform-style: preserve-3d;
        }

        /* Enhanced VRF node styles (for compatibility) */
        .vrf-node,
        .vrf-node-perfect {
            position: absolute;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            z-index: 10;
            user-select: none;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            transform: scale(1);
            will-change: transform, box-shadow;
            backface-visibility: hidden;
        }

        .vrf-node:hover,
        .vrf-node-perfect:hover {
            transform: scale(1.12) !important;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5) !important;
            z-index: 15 !important;
            border-color: rgba(255, 255, 255, 0.4);
        }

        .vrf-node.selected,
        .vrf-node-perfect.selected {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.5);
            transform: scale(1.15);
            border-color: rgba(255, 255, 255, 0.6);
        }

        /* Enhanced connection paths */
        .connection-path,
        .connection-path-perfect {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: stroke, stroke-width, filter, stroke-opacity;
            vector-effect: non-scaling-stroke;
        }

        .connection-path:hover,
        .connection-path-perfect:hover {
            stroke-width: 3 !important;
            stroke-opacity: 0.9 !important;
            filter: drop-shadow(0 0 8px currentColor) !important;
        }

        .vrf-info-panel {
            position: absolute;
            top: 20px;
            right: -350px;
            width: 320px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .vrf-info-panel.active {
            right: 20px;
        }

        .vrf-info-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vrf-info-header h3 {
            margin: 0;
            font-size: 1.1em;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 3px;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .vrf-info-content {
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .info-section {
            margin-bottom: 15px;
        }

        .info-section h4 {
            color: #1e3a8a;
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-list {
            background: #f8fafc;
            border-radius: 6px;
            padding: 10px;
            border-left: 3px solid #3b82f6;
        }

        .info-item {
            padding: 4px 0;
            color: #374151;
            font-size: 0.85em;
            font-family: 'Courier New', monospace;
            border-bottom: 1px solid #e5e7eb;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .matrix-section {
            padding: 35px;
            background: #f9fafb;
            border-top: 2px solid #e5e7eb;
        }

        .matrix-title {
            font-size: 1.8em;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 25px;
            text-align: center;
        }

        .matrix-scroll-container {
            width: 100%;
            overflow-x: auto;
            overflow-y: auto;
            max-height: 600px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .matrix-scroll-container::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        .matrix-scroll-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        .matrix-scroll-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border-radius: 10px;
            border: 2px solid #f1f5f9;
        }

        .matrix-scroll-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
        }

        /* Firefox scrollbar styling */
        .matrix-scroll-container {
            scrollbar-width: thin;
            scrollbar-color: #3b82f6 #f1f5f9;
        }

        #matrixContainer table {
            min-width: 100%;
            border-collapse: collapse;
        }

        #matrixContainer table th,
        #matrixContainer table td {
            white-space: nowrap;
            min-width: 120px;
            position: relative;
        }

        #matrixContainer table th:first-child,
        #matrixContainer table td:first-child {
            position: sticky;
            left: 0;
            z-index: 10;
            background: #1e3a8a;
        }

        #matrixContainer table td:first-child {
            background: #f0f9ff;
            font-weight: 600;
        }

        .matrix-export-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .template-section {
            padding: 35px;
            background: #f9fafb;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .template-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: all 0.3s;
            border: 2px solid #e5e7eb;
        }

        .template-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            border-color: #3b82f6;
        }

        .template-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .template-header h3 {
            font-size: 1.4em;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .template-header p {
            font-size: 0.95em;
            opacity: 0.9;
        }

        .template-content {
            padding: 20px;
        }

        .template-form {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }

        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
        }

        .form-row label {
            min-width: 140px;
            font-weight: 500;
            color: #374151;
            font-size: 0.9em;
        }

        .form-row input {
            flex: 1;
            padding: 6px 12px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .form-row input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }

        .template-textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            resize: vertical;
            background: #f8fafc;
            transition: all 0.3s;
        }

        .template-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: white;
        }

        .template-actions {
            padding: 15px 20px;
            background: #f8fafc;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .template-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .template-btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
        }

        .template-btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .template-btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }

        .template-btn-secondary:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }

        @media (max-width: 768px) {
            .top-nav {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .tab-nav {
                padding: 10px 15px 0 15px;
            }

            .header h1 {
                font-size: 2em;
            }

            .input-section,
            .template-section,
            .results-section,
            .matrix-section,
            .network-section {
                padding: 20px;
            }

            .template-grid {
                grid-template-columns: 1fr;
            }

            .ios-options {
                justify-content: center;
            }

            .vrf-info-panel {
                width: 90%;
                right: -90%;
            }

            .vrf-info-panel.active {
                right: 5%;
            }
        }
    </style>
</head>

<body>
    <nav class="top-nav">
        <div class="nav-brand">
            <span>üåê</span>
            Network Tools Suite
        </div>
        <div class="nav-links">
            <a href="#" class="nav-link active">MPLS Tool</a>
            <a href="#" class="nav-link more-tools">More Tools</a>
        </div>
    </nav>

    <nav class="tab-nav">
        <button class="tab-button active" onclick="switchTab('vrf-analyzer')">
            üîç VRFs Route Targets Analyzer
        </button>
        <button class="tab-button" onclick="switchTab('templates')">
            üìã Templates And Config Generator
        </button>
    </nav>

    <div class="container">
        <div id="vrf-analyzer" class="tab-content active">
            <div class="header">
                <h1>üåê MPLS VRFs Route-Target Traffic Flow Analyzer</h1>
                <p>MPLS Route targets import/export analysis tool with animated traffic flow and MPLS configuration
                    templates</p>
            </div>

            <div class="privacy-notice">
                <div class="icon">üîí</div>
                <div class="text">
                    <strong>100% Client-Side Processing</strong>
                    <p>Your network configurations are processed entirely in your browser. No data is uploaded to
                        external servers, ensuring complete privacy and security of your sensitive network information.
                    </p>
                </div>
            </div>

            <div class="input-section">
                <label class="input-label">
                    <span>üìù</span>
                    Input Your VRFs Route Targets Config Data:
                </label>

                <div class="ios-selector">
                    <label>Select IOS Version:</label>
                    <div class="ios-options">
                        <label class="ios-option">
                            <input type="radio" name="ios-version" value="ios" checked>
                            <span>iOS/IOS-XE</span>
                        </label>
                    </div>
                </div>

                <textarea id="configInput" placeholder="Paste your VRF configuration here...

Example for iOS/iOS-XE:
ip vrf CUSTOMER-A
 description Customer A VPN
 rd 65000:1001
 route-target export 65000:1001
 route-target import 65000:1001

Example for iOS-XR:
vrf CUSTOMER-A
 description Customer A VPN
 address-family ipv4 unicast
  import route-target 65000:1001
  export route-target 65000:1001

Supports: ip vrf, vrf definition, vrf (IOS-XR), and JUNOS syntax"></textarea>

                <div class="button-group">
                    <button class="btn-primary" onclick="analyzeConfig()">
                        <span>üî¨</span>
                        Analyze Configuration
                    </button>
                    <button class="btn-secondary" onclick="clearAll()">
                        <span>üóëÔ∏è</span>
                        Clear All
                    </button>
                </div>
            </div>

            <div id="results" style="display: none;">
                <div class="results-section">
                    <div class="stats-grid" id="statsGrid">
                        <!-- Stats will be dynamically generated -->
                    </div>
                </div>

                <div class="network-section">
                    <div class="network-visualization">
                        <h2 style="text-align: center; color: white; margin-bottom: 25px;">üó∫Ô∏è VRFs and Route Targets
                            Mapping</h2>

                        <div class="network-controls">
                            <div class="zoom-controls">
                                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
                                <span class="zoom-level" id="zoomLevel">100%</span>
                                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">-</button>
                                <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">‚åÇ</button>
                            </div>

                            <div class="network-info">
                                <div class="info-item">
                                    <span class="info-label">VRFs:</span>
                                    <span class="info-value" id="vrfCount">0</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Connections:</span>
                                    <span class="info-value" id="connectionCount">0</span>
                                </div>
                            </div>
                        </div>

                        <div class="network-canvas" id="networkCanvas">
                            <div id="trafficParticles"></div>
                        </div>

                        <div class="vrf-info-panel" id="vrfInfoPanel">
                            <div class="vrf-info-header">
                                <h3 id="vrfInfoTitle">VRF Information</h3>
                                <button class="close-btn" onclick="closeVrfInfo()">√ó</button>
                            </div>
                            <div class="vrf-info-content" id="vrfInfoContent">
                                <!-- VRF details will be dynamically populated -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="matrix-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                        <h2 class="matrix-title" style="margin: 0;">üìä Route-Target Connection Matrix</h2>
                    </div>
                    <div class="matrix-scroll-container">
                        <div id="matrixContainer">
                            <!-- Matrix will be generated here -->
                        </div>
                    </div>
                    <div class="matrix-export-buttons">
                        <button class="control-btn" onclick="exportMatrixCSV()"
                            style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); display: flex; align-items: center; gap: 8px; padding: 12px 24px;">
                            <span style="font-size: 1.2em;">üìä</span>
                            <span>Export Matrix CSV</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="templates" class="tab-content">
            <div class="header">
                <h1>üìã MPLS Onboarding Templates</h1>
                <p>Interactive configuration generators for MPLS network onboarding and optimization</p>
            </div>

            <div class="template-section">
                <div class="template-grid">
                    <!-- L2VPN xConnect Generator - POSITION 1 -->
                    <div class="template-card">
                        <div class="template-header">
                            <h3>üîó L2VPN xConnect Generator</h3>
                            <p>Generate L2VPN xConnect configuration for point-to-point connections between two PE
                                routers</p>
                        </div>
                        <div class="template-content">
                            <!-- Network Diagram -->
                            <div
                                style="background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%); border: 3px solid #3b82f6; border-radius: 12px; padding: 25px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <h4 style="color: #1e40af; margin-bottom: 20px; text-align: center; font-size: 1.3em;">
                                    üìä L2VPN xConnect Topology</h4>

                                <svg viewBox="0 0 800 200"
                                    style="width: 100%; max-width: 800px; margin: 0 auto; display: block;">
                                    <defs>
                                        <linearGradient id="routerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#1e40af;stop-opacity:1" />
                                        </linearGradient>
                                        <linearGradient id="cloudGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#e2e8f0;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#cbd5e1;stop-opacity:1" />
                                        </linearGradient>
                                        <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
                                            <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
                                            <feOffset dx="2" dy="2" result="offsetblur" />
                                            <feComponentTransfer>
                                                <feFuncA type="linear" slope="0.3" />
                                            </feComponentTransfer>
                                            <feMerge>
                                                <feMergeNode />
                                                <feMergeNode in="SourceGraphic" />
                                            </feMerge>
                                        </filter>
                                    </defs>

                                    <!-- Cloud -->
                                    <path
                                        d="M 350,100 Q 350,60 400,60 Q 430,30 480,60 Q 530,60 530,100 Q 560,100 560,130 Q 560,160 530,160 Q 500,190 450,160 Q 400,160 380,130 Q 350,130 350,100"
                                        fill="url(#cloudGradient)" stroke="#94a3b8" stroke-width="2"
                                        filter="url(#dropShadow)" />
                                    <text x="455" y="115" text-anchor="middle" font-family="Arial" font-weight="bold"
                                        fill="#475569" font-size="14">MPLS Backbone</text>

                                    <!-- Connections -->
                                    <line x1="100" y1="100" x2="180" y2="100" stroke="#64748b" stroke-width="4" />
                                    <line x1="220" y1="100" x2="360" y2="100" stroke="#64748b" stroke-width="4"
                                        stroke-dasharray="8,4" />
                                    <line x1="540" y1="100" x2="680" y2="100" stroke="#64748b" stroke-width="4"
                                        stroke-dasharray="8,4" />
                                    <line x1="720" y1="100" x2="800" y2="100" stroke="#64748b" stroke-width="4" />

                                    <!-- Pseudowire Path Animation -->
                                    <path d="M 220,100 L 680,100" stroke="#10b981" stroke-width="3" fill="none"
                                        stroke-dasharray="10,10" opacity="0.8">
                                        <animate attributeName="stroke-dashoffset" from="200" to="0" dur="2s"
                                            repeatCount="indefinite" />
                                    </path>

                                    <!-- CE1 -->
                                    <circle cx="80" cy="100" r="25" fill="#64748b" filter="url(#dropShadow)" />
                                    <text x="80" y="105" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="12">CE1</text>

                                    <!-- PE1 -->
                                    <circle cx="200" cy="100" r="35" fill="url(#routerGradient)"
                                        filter="url(#dropShadow)" />
                                    <text x="200" y="105" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">PE1</text>
                                    <text x="200" y="155" text-anchor="middle" fill="#1e40af" font-family="Arial"
                                        font-weight="bold" font-size="12">Green</text>
                                    <text x="200" y="170" text-anchor="middle" fill="#64748b" font-family="Arial"
                                        font-size="10" id="diagram-pe1-ip">10.10.10.1</text>

                                    <!-- PE2 -->
                                    <circle cx="700" cy="100" r="35" fill="url(#routerGradient)"
                                        filter="url(#dropShadow)" />
                                    <text x="700" y="105" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">PE2</text>
                                    <text x="700" y="155" text-anchor="middle" fill="#1e40af" font-family="Arial"
                                        font-weight="bold" font-size="12">Blue</text>
                                    <text x="700" y="170" text-anchor="middle" fill="#64748b" font-family="Arial"
                                        font-size="10" id="diagram-pe2-ip">10.10.10.2</text>

                                    <!-- CE2 -->
                                    <circle cx="820" cy="100" r="25" fill="#64748b" filter="url(#dropShadow)" />
                                    <text x="820" y="105" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="12">CE2</text>

                                    <!-- VC ID Label -->
                                    <rect x="405" y="140" width="100" height="24" rx="12" fill="#f0fdf4"
                                        stroke="#10b981" stroke-width="1" />
                                    <text x="455" y="156" text-anchor="middle" fill="#15803d" font-family="Arial"
                                        font-size="11" font-weight="bold">VC ID: <tspan id="diagram-vcid">10007</tspan>
                                    </text>
                                </svg>
                            </div>

                            <div class="template-form">
                                <div class="form-row">
                                    <label>PE1 Router Name (Green):</label>
                                    <input type="text" id="pe1RouterName" placeholder="Green" value="Green">
                                </div>
                                <div class="form-row">
                                    <label>PE1 Loopback IP:</label>
                                    <input type="text" id="pe1LoopbackIP" placeholder="10.10.10.1" value="10.10.10.1"
                                        oninput="updateL2VPNDiagram()">
                                </div>
                                <div class="form-row">
                                    <label>PE1 Local Interface:</label>
                                    <input type="text" id="pe1LocalInterface" placeholder="GigabitEthernet1/0/1"
                                        value="GigabitEthernet1/0/1">
                                </div>
                                <div class="form-row">
                                    <label>PE2 Router Name (Blue):</label>
                                    <input type="text" id="pe2RouterName" placeholder="Blue" value="Blue">
                                </div>
                                <div class="form-row">
                                    <label>PE2 Loopback IP:</label>
                                    <input type="text" id="pe2LoopbackIP" placeholder="10.10.10.2" value="10.10.10.2"
                                        oninput="updateL2VPNDiagram()">
                                </div>
                                <div class="form-row">
                                    <label>PE2 Local Interface:</label>
                                    <input type="text" id="pe2LocalInterface" placeholder="GigabitEthernet1/0/1"
                                        value="GigabitEthernet1/0/1">
                                </div>
                                <div class="form-row">
                                    <label>VC ID:</label>
                                    <input type="text" id="vcId" placeholder="10007" value="10007"
                                        oninput="updateL2VPNDiagram()">
                                </div>
                                <div class="form-row">
                                    <label>Pseudowire Class Name:</label>
                                    <input type="text" id="pwClassName" placeholder="Green_Blue" value="Green_Blue">
                                </div>
                                <button class="template-btn template-btn-primary" onclick="generateL2VPNConfig()">
                                    üîß Generate L2VPN Config
                                </button>
                            </div>
                            <textarea class="template-textarea" id="l2vpnTemplate" readonly></textarea>
                        </div>
                        <div class="template-actions">
                            <button class="template-btn template-btn-primary" onclick="copyTemplate('l2vpnTemplate')">
                                üìã Copy Template
                            </button>
                            <button class="template-btn template-btn-secondary"
                                onclick="downloadTemplate('l2vpnTemplate', 'L2VPN-xConnect-Config.txt')">
                                üíæ Download Config
                            </button>
                            <button class="template-btn template-btn-secondary" onclick="downloadPythonScript('l2vpn')"
                                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                üêç Download Python Script
                            </button>
                        </div>
                    </div>

                    <!-- MPLS Traffic Engineering Generator - POSITION 2 -->
                    <div class="template-card">
                        <div class="template-header">
                            <h3>üöÄ MPLS Traffic Engineering Generator</h3>
                            <p>Generate customized MPLS-TE configuration with multiple tunnel paths</p>
                        </div>
                        <div class="template-content">
                            <!-- Network Diagram -->
                            <div
                                style="background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%); border: 3px solid #3b82f6; border-radius: 12px; padding: 25px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <h4 style="color: #1e40af; margin-bottom: 20px; text-align: center; font-size: 1.3em;">
                                    üìä MPLS-TE Dual Tunnel Topology</h4>

                                <!-- Enhanced SVG Diagram -->
                                <svg viewBox="0 0 900 500"
                                    style="width: 100%; max-width: 900px; margin: 0 auto; display: block;">
                                    <!-- Define styles and gradients -->
                                    <defs>
                                        <linearGradient id="peGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#1e40af;stop-opacity:1" />
                                        </linearGradient>
                                        <linearGradient id="pGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#64748b;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#475569;stop-opacity:1" />
                                        </linearGradient>
                                        <linearGradient id="ceGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#94a3b8;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#64748b;stop-opacity:1" />
                                        </linearGradient>

                                        <filter id="routerShadow" x="-20%" y="-20%" width="140%" height="140%">
                                            <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
                                            <feOffset dx="2" dy="2" result="offsetblur" />
                                            <feComponentTransfer>
                                                <feFuncA type="linear" slope="0.3" />
                                            </feComponentTransfer>
                                            <feMerge>
                                                <feMergeNode />
                                                <feMergeNode in="SourceGraphic" />
                                            </feMerge>
                                        </filter>

                                        <!-- Gradient for tunnel labels -->
                                        <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                                        </linearGradient>
                                        <linearGradient id="greenGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#34d399;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>

                                    <!-- Tunnel 1 (Blue) Path - Arc over top -->
                                    <path d="M 230,250 Q 300,90 450,60 Q 600,90 670,250" fill="none" stroke="#bfdbfe"
                                        stroke-width="24" opacity="0.4" stroke-linecap="round" />
                                    <path d="M 230,250 Q 300,90 450,60 Q 600,90 670,250" fill="none" stroke="#3b82f6"
                                        stroke-width="4" stroke-dasharray="15,10" stroke-linecap="round">
                                        <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s"
                                            repeatCount="indefinite" />
                                    </path>

                                    <!-- Tunnel 2 (Green) Path - Arc over bottom -->
                                    <path d="M 230,250 Q 250,360 350,380 Q 500,380 650,330 Q 670,290 670,250"
                                        fill="none" stroke="#a7f3d0" stroke-width="24" opacity="0.4"
                                        stroke-linecap="round" />
                                    <path d="M 230,250 Q 250,360 350,380 Q 500,380 650,330 Q 670,290 670,250"
                                        fill="none" stroke="#10b981" stroke-width="4" stroke-dasharray="15,10"
                                        stroke-linecap="round">
                                        <animate attributeName="stroke-dashoffset" from="100" to="0" dur="4s"
                                            repeatCount="indefinite" />
                                    </path>

                                    <!-- Tunnel Labels with background -->
                                    <rect x="360" y="42" width="180" height="28" rx="14" fill="url(#blueGradient)"
                                        opacity="0.9" filter="url(#routerShadow)" />
                                    <text x="450" y="62" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="13">MPLS TE Tunnel 1</text>

                                    <rect x="360" y="465" width="180" height="28" rx="14" fill="url(#greenGradient)"
                                        opacity="0.9" filter="url(#routerShadow)" />
                                    <text x="450" y="485" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="13">MPLS TE Tunnel 2</text>

                                    <!-- Connection Lines (Physical) -->
                                    <g stroke="#64748b" stroke-width="3">
                                        <line x1="105" y1="250" x2="168" y2="250" />
                                        <line x1="242" y1="222" x2="418" y2="98" />
                                        <line x1="482" y1="98" x2="658" y2="222" />
                                        <line x1="240" y1="278" x2="318" y2="350" />
                                        <line x1="390" y1="380" x2="510" y2="380" />
                                        <line x1="582" y1="358" x2="662" y2="282" />
                                        <line x1="732" y1="250" x2="795" y2="250" />
                                    </g>

                                    <!-- Router Circles -->
                                    <!-- CE1 -->
                                    <circle cx="70" cy="250" r="35" fill="url(#ceGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="70" y="255" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">CE1</text>

                                    <!-- PE1 -->
                                    <circle cx="205" cy="250" r="40" fill="url(#peGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="205" y="255" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="16">PE1</text>

                                    <!-- P1 -->
                                    <circle cx="450" cy="80" r="35" fill="url(#pGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="450" y="85" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">P1</text>

                                    <!-- P2 -->
                                    <circle cx="350" cy="380" r="35" fill="url(#pGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="350" y="385" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">P2</text>

                                    <!-- P3 -->
                                    <circle cx="550" cy="380" r="35" fill="url(#pGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="550" y="385" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">P3</text>

                                    <!-- PE2 -->
                                    <circle cx="695" cy="250" r="40" fill="url(#peGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="695" y="255" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="16">PE2</text>

                                    <!-- CE2 -->
                                    <circle cx="830" cy="250" r="35" fill="url(#ceGradient)"
                                        filter="url(#routerShadow)" />
                                    <text x="830" y="255" text-anchor="middle" fill="white" font-family="Arial"
                                        font-weight="bold" font-size="14">CE2</text>

                                    <!-- Metric Boxes -->
                                    <g>
                                        <!-- P1 Top -->
                                        <rect x="385" y="5" width="130" height="40" rx="6" fill="white" stroke="#94a3b8"
                                            stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="450" y="22" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="450" y="38" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#3b82f6">TE: 100</text>

                                        <!-- PE1-P1 -->
                                        <rect x="250" y="130" width="130" height="40" rx="6" fill="white"
                                            stroke="#94a3b8" stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="315" y="147" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="315" y="163" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#3b82f6">TE: 100</text>

                                        <!-- P1-PE2 -->
                                        <rect x="520" y="130" width="130" height="40" rx="6" fill="white"
                                            stroke="#94a3b8" stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="585" y="147" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="585" y="163" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#3b82f6">TE: 100</text>

                                        <!-- PE1-P2 -->
                                        <rect x="210" y="290" width="130" height="40" rx="6" fill="white"
                                            stroke="#94a3b8" stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="275" y="307" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="275" y="323" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#10b981">TE: 50</text>

                                        <!-- P2-P3 -->
                                        <rect x="385" y="400" width="130" height="40" rx="6" fill="white"
                                            stroke="#94a3b8" stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="450" y="417" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="450" y="433" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#10b981">TE: 50</text>

                                        <!-- P3-PE2 -->
                                        <rect x="590" y="290" width="130" height="40" rx="6" fill="white"
                                            stroke="#94a3b8" stroke-width="1" filter="url(#routerShadow)" />
                                        <text x="655" y="307" text-anchor="middle" font-family="Arial" font-size="11"
                                            fill="#64748b">IGP: 100</text>
                                        <text x="655" y="323" text-anchor="middle" font-family="Arial" font-size="11"
                                            font-weight="bold" fill="#10b981">TE: 50</text>
                                    </g>
                                </svg>

                                <div
                                    style="margin-top: 25px; padding: 18px; background: white; border-left: 5px solid #3b82f6; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <strong style="color: #1e40af; font-size: 1.05em;">üìå Path Details:</strong><br>
                                    <div style="color: #475569; font-size: 0.95em; margin-top: 12px; line-height: 2;">
                                        <div
                                            style="margin-bottom: 12px; padding: 10px; background: #eff6ff; border-radius: 6px;">
                                            <strong style="color: #3b82f6; font-size: 1.02em;">üîµ Tunnel 1 (Primary Path
                                                via P1):</strong><br>
                                            <span style="margin-left: 25px; font-size: 0.92em; color: #64748b;">Route:
                                                PE1 ‚Üí P1 ‚Üí PE2</span><br>
                                            <span style="margin-left: 25px; font-size: 0.92em; color: #64748b;">Cost:
                                                <strong>IGP = 100, TE = 100</strong></span>
                                        </div>
                                        <div style="padding: 10px; background: #f0fdf4; border-radius: 6px;">
                                            <strong style="color: #10b981; font-size: 1.02em;">üü¢ Tunnel 2 (Preferred
                                                Path via P2-P3):</strong><br>
                                            <span style="margin-left: 25px; font-size: 0.92em; color: #64748b;">Route:
                                                PE1 ‚Üí P2 ‚Üí P3 ‚Üí PE2</span><br>
                                            <span style="margin-left: 25px; font-size: 0.92em; color: #64748b;">Cost:
                                                <strong>IGP = 100, TE = 50</strong> ‚≠ê Lower TE cost - preferred!</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="template-form">
                                <div class="form-row">
                                    <label>PE1 Router ID:</label>
                                    <input type="text" id="teRouterId" placeholder="1.1.1.1" value="1.1.1.1">
                                </div>
                                <div class="form-row">
                                    <label>PE2 Router ID:</label>
                                    <input type="text" id="teDestIP" placeholder="2.2.2.2" value="2.2.2.2">
                                </div>
                                <div class="form-row">
                                    <label>Tunnel 1 Interface:</label>
                                    <input type="text" id="teTunnelIntf" placeholder="Tunnel1" value="Tunnel1">
                                </div>
                                <div class="form-row">
                                    <label>Tunnel 1 Bandwidth (Kbps):</label>
                                    <input type="text" id="teBandwidth" placeholder="100000" value="100000">
                                </div>
                                <div class="form-row">
                                    <label>Tunnel 2 Interface:</label>
                                    <input type="text" id="teTunnel2Intf" placeholder="Tunnel2" value="Tunnel2">
                                </div>
                                <div class="form-row">
                                    <label>Tunnel 2 Bandwidth (Kbps):</label>
                                    <input type="text" id="teTunnel2Bandwidth" placeholder="50000" value="50000">
                                </div>
                                <div class="form-row">
                                    <label>P1 Router IP:</label>
                                    <input type="text" id="teP1IP" placeholder="10.1.1.1" value="10.1.1.1">
                                </div>
                                <div class="form-row">
                                    <label>P2 Router IP:</label>
                                    <input type="text" id="teP2IP" placeholder="10.2.2.2" value="10.2.2.2">
                                </div>
                                <div class="form-row">
                                    <label>P3 Router IP:</label>
                                    <input type="text" id="teP3IP" placeholder="10.3.3.3" value="10.3.3.3">
                                </div>
                                <div class="form-row">
                                    <label>PE1‚ÜíP1 Interface:</label>
                                    <input type="text" id="teInterface" placeholder="GigabitEthernet0/1"
                                        value="GigabitEthernet0/1">
                                </div>
                                <div class="form-row">
                                    <label>PE1‚ÜíP2 Interface:</label>
                                    <input type="text" id="teInterface2" placeholder="GigabitEthernet0/2"
                                        value="GigabitEthernet0/2">
                                </div>
                                <button class="template-btn template-btn-primary" onclick="generateTEConfig()">
                                    üîß Generate Dual-Tunnel TE Config
                                </button>
                            </div>
                            <textarea class="template-textarea" id="mplsTeTemplate" readonly></textarea>
                        </div>
                        <div class="template-actions">
                            <button class="template-btn template-btn-primary" onclick="copyTemplate('mplsTeTemplate')">
                                üìã Copy Template
                            </button>
                            <button class="template-btn template-btn-secondary"
                                onclick="downloadTemplate('mplsTeTemplate', 'MPLS-TE-Config.txt')">
                                üíæ Download Config
                            </button>
                            <button class="template-btn template-btn-secondary"
                                onclick="downloadPythonScript('mpls-te')"
                                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                üêç Download Python Script
                            </button>
                        </div>
                    </div>

                    <div class="template-card">
                        <div class="template-header">
                            <h3>üéØ QoS Configuration Generator</h3>
                            <p>Generate customized QoS policies This is still in progress to make the configuration
                                template to be correct.</p>
                        </div>
                        <div class="template-content">
                            <div class="template-form">
                                <div class="form-row">
                                    <label>Voice Bandwidth (%):</label>
                                    <input type="text" id="qosVoiceBW" placeholder="20" value="20">
                                </div>
                                <div class="form-row">
                                    <label>Video Bandwidth (%):</label>
                                    <input type="text" id="qosVideoBW" placeholder="25" value="25">
                                </div>
                                <div class="form-row">
                                    <label>Critical Data (%):</label>
                                    <input type="text" id="qosCriticalBW" placeholder="25" value="25">
                                </div>
                                <div class="form-row">
                                    <label>WAN Interface:</label>
                                    <input type="text" id="qosInterface" placeholder="GigabitEthernet0/0/0"
                                        value="GigabitEthernet0/0/0">
                                </div>
                                <div class="form-row">
                                    <label>Policy Name:</label>
                                    <input type="text" id="qosPolicyName" placeholder="ENTERPRISE-QOS"
                                        value="ENTERPRISE-QOS">
                                </div>
                                <button class="template-btn template-btn-primary" onclick="generateQoSConfig()">
                                    üîß Generate QoS Config
                                </button>
                            </div>
                            <textarea class="template-textarea" id="qosTemplate" readonly></textarea>
                        </div>
                        <div class="template-actions">
                            <button class="template-btn template-btn-primary" onclick="copyTemplate('qosTemplate')">
                                üìã Copy Template
                            </button>
                            <button class="template-btn template-btn-secondary"
                                onclick="downloadTemplate('qosTemplate', 'QoS-Config.txt')">
                                üíæ Download Config
                            </button>
                            <button class="template-btn template-btn-secondary" onclick="downloadPythonScript('qos')"
                                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                üêç Download Python Script
                            </button>
                        </div>
                    </div>

                    <div class="template-card">
                        <div class="template-header">
                            <h3>üìù MPLS Onboarding Checklist</h3>
                            <p>Complete checklist for MPLS network onboarding</p>
                        </div>
                        <div class="template-content">
                            <textarea class="template-textarea" id="onboardingChecklist" readonly>MPLS Network Onboarding Checklist
=====================================

PRE-DEPLOYMENT PHASE
‚ñ° Network Design Review
  ‚ñ° Topology verification
  ‚ñ° IP addressing scheme validation  
  ‚ñ° VLAN/VRF planning
  ‚ñ° QoS requirements analysis

‚ñ° Hardware Preparation
  ‚ñ° Router/switch configuration backup
  ‚ñ° IOS version compatibility check
  ‚ñ° Hardware inventory verification
  ‚ñ° Port mapping documentation

CONFIGURATION PHASE
‚ñ° Basic Router Configuration
  ‚ñ° Hostname and domain configuration
  ‚ñ° Management IP addresses
  ‚ñ° SNMP configuration
  ‚ñ° NTP synchronization

‚ñ° MPLS Core Configuration
  ‚ñ° MPLS IP enabled globally
  ‚ñ° LDP configuration
  ‚ñ° OSPF/BGP routing protocols
  ‚ñ° Route reflector configuration

‚ñ° VRF Configuration
  ‚ñ° VRF definition with RD
  ‚ñ° Route target configuration
  ‚ñ° VRF interface assignment
  ‚ñ° BGP VPNv4 neighbor configuration

‚ñ° QoS Implementation
  ‚ñ° Class maps configuration
  ‚ñ° Policy maps configuration
  ‚ñ° Interface QoS application
  ‚ñ° MPLS EXP marking

TESTING PHASE
‚ñ° Connectivity Tests
  ‚ñ° Ping tests within VRFs
  ‚ñ° Traceroute verification
  ‚ñ° BGP neighbor establishment
  ‚ñ° Route propagation verification

‚ñ° QoS Verification
  ‚ñ° Traffic marking validation
  ‚ñ° Bandwidth allocation testing
  ‚ñ° Latency measurements

VERIFICATION COMMANDS
==================
show mpls ldp neighbor
show mpls forwarding-table
show ip vrf
show ip bgp vpnv4 all summary
show ip route vrf [vrf-name]
show policy-map interface
show mpls traffic-eng tunnels

MAINTENANCE SCHEDULE
==================
Daily:    Interface monitoring, traffic statistics
Weekly:   Configuration backup, log review
Monthly:  Performance analysis, capacity planning
Quarterly: Hardware health check, software updates</textarea>
                        </div>
                        <div class="template-actions">
                            <button class="template-btn template-btn-primary"
                                onclick="copyTemplate('onboardingChecklist')">
                                üìã Copy Checklist
                            </button>
                            <button class="template-btn template-btn-secondary"
                                onclick="downloadTemplate('onboardingChecklist', 'MPLS-Onboarding-Checklist.txt')">
                                üíæ Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let vrfData = [];
        let connections = [];
        let selectedVRF = null;
        let currentZoom = 1;
        let animationInterval;
        let isAnimationRunning = true;

        function switchTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function generateTEConfig() {
            const routerId = document.getElementById('teRouterId').value || '1.1.1.1';
            const destIP = document.getElementById('teDestIP').value || '2.2.2.2';
            const tunnel1Intf = document.getElementById('teTunnelIntf').value || 'Tunnel1';
            const tunnel1BW = document.getElementById('teBandwidth').value || '100000';
            const tunnel2Intf = document.getElementById('teTunnel2Intf')?.value || 'Tunnel2';
            const tunnel2BW = document.getElementById('teTunnel2Bandwidth')?.value || '50000';
            const p1IP = document.getElementById('teP1IP')?.value || '10.1.1.1';
            const p2IP = document.getElementById('teP2IP')?.value || '10.2.2.2';
            const p3IP = document.getElementById('teP3IP')?.value || '10.3.3.3';
            const interface1 = document.getElementById('teInterface').value || 'GigabitEthernet0/1';
            const interface2 = document.getElementById('teInterface2')?.value || 'GigabitEthernet0/2';

            let config = `! ========================================================
! MPLS Traffic Engineering - Dual Tunnel Configuration
! Generated: ${new Date().toLocaleString()}
! ========================================================
! PE1 Router Configuration (Source: ${routerId})
! ========================================================

hostname PE1

! Enable MPLS globally
mpls ip
mpls label protocol ldp
mpls ldp router-id Loopback0 force

! Enable MPLS Traffic Engineering globally
mpls traffic-eng tunnels

! ========================================================
! RSVP Configuration
! ========================================================

! Enable RSVP globally for TE signaling
ip rsvp bandwidth

! ========================================================
! IGP Configuration (OSPF with TE Extensions)
! ========================================================

router ospf 1
 router-id ${routerId}
 mpls traffic-eng router-id Loopback0
 mpls traffic-eng area 0
 network ${routerId} 0.0.0.0 area 0
!

! ========================================================
! Interface Configuration - PE1
! ========================================================

! Loopback interface
interface Loopback0
 ip address ${routerId} 255.255.255.255
 ip ospf 1 area 0
!

! Interface to P1 (Tunnel 1 path)
interface ${interface1}
 description ** Connection to P1 - Tunnel 1 Path **
 ip address 30.30.30.1 255.255.255.252
 ip ospf network point-to-point
 ip ospf cost 100
 ip ospf 1 area 0
 mpls ip
 mpls traffic-eng tunnels
 mpls traffic-eng administrative-weight 100
 ip rsvp bandwidth ${tunnel1BW}
!

! Interface to P2 (Tunnel 2 path)
interface ${interface2}
 description ** Connection to P2 - Tunnel 2 Path **
 ip address 30.30.30.5 255.255.255.252
 ip ospf network point-to-point
 ip ospf cost 100
 ip ospf 1 area 0
 mpls ip
 mpls traffic-eng tunnels
 mpls traffic-eng administrative-weight 50
 ip rsvp bandwidth ${tunnel2BW}
!

! ========================================================
! MPLS-TE Tunnel 1 Configuration (via P1)
! ========================================================

interface ${tunnel1Intf}
 description ** TE Tunnel to PE2 via P1 (IGP:100 TE:100) **
 ip unnumbered Loopback0
 tunnel destination ${destIP}
 tunnel mode mpls traffic-eng
 tunnel mpls traffic-eng autoroute announce
 tunnel mpls traffic-eng priority 7 7
 tunnel mpls traffic-eng bandwidth ${tunnel1BW}
 tunnel mpls traffic-eng path-option 10 explicit name PATH-VIA-P1
 tunnel mpls traffic-eng path-option 20 dynamic
!

! Explicit path for Tunnel 1
ip explicit-path name PATH-VIA-P1 enable
 next-address ${p1IP}
!

! ========================================================
! MPLS-TE Tunnel 2 Configuration (via P2-P3)
! ========================================================

interface ${tunnel2Intf}
 description ** TE Tunnel to PE2 via P2-P3 (IGP:100 TE:50) - PREFERRED **
 ip unnumbered Loopback0
 tunnel destination ${destIP}
 tunnel mode mpls traffic-eng
 tunnel mpls traffic-eng autoroute announce
 tunnel mpls traffic-eng priority 7 7
 tunnel mpls traffic-eng bandwidth ${tunnel2BW}
 tunnel mpls traffic-eng path-option 1 explicit name PATH-VIA-P2-P3
 tunnel mpls traffic-eng path-option 10 dynamic
!

! Explicit path for Tunnel 2
ip explicit-path name PATH-VIA-P2-P3 enable
 next-address ${p2IP}
 next-address ${p3IP}
!

! ========================================================
! Advanced TE Features
! ========================================================

! Auto-bandwidth for Tunnel 1
interface ${tunnel1Intf}
 tunnel mpls traffic-eng auto-bw
 tunnel mpls traffic-eng auto-bw frequency 60
 tunnel mpls traffic-eng auto-bw max-bw ${Math.round(tunnel1BW * 1.5)}
 tunnel mpls traffic-eng auto-bw min-bw ${Math.round(tunnel1BW * 0.2)}
!

! Auto-bandwidth for Tunnel 2
interface ${tunnel2Intf}
 tunnel mpls traffic-eng auto-bw
 tunnel mpls traffic-eng auto-bw frequency 60
 tunnel mpls traffic-eng auto-bw max-bw ${Math.round(tunnel2BW * 1.5)}
 tunnel mpls traffic-eng auto-bw min-bw ${Math.round(tunnel2BW * 0.2)}
!

! Fast Reroute (FRR) for protection
interface ${tunnel1Intf}
 tunnel mpls traffic-eng fast-reroute
!

interface ${tunnel2Intf}
 tunnel mpls traffic-eng fast-reroute
!

! ========================================================
! P Router Configurations
! ========================================================

! ---------------------------------------------------------
! P1 Router Configuration (IGP: 100, TE: 100)
! ---------------------------------------------------------
!
! hostname P1
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id ${p1IP}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network ${p1IP} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address ${p1IP} 255.255.255.255
!
! interface GigabitEthernet0/0
!  description ** To PE1 **
!  ip address 30.30.30.2 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/1
!  description ** To PE2 **
!  ip address 40.40.40.2 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!

! ---------------------------------------------------------
! P2 Router Configuration (IGP: 100, TE: 50)
! ---------------------------------------------------------
!
! hostname P2
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id ${p2IP}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network ${p2IP} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address ${p2IP} 255.255.255.255
!
! interface GigabitEthernet0/0
!  description ** To PE1 **
!  ip address 30.30.30.6 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/1
!  description ** To P3 **
!  ip address 40.40.40.5 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ---------------------------------------------------------
! P3 Router Configuration (IGP: 100, TE: 50)
! ---------------------------------------------------------
!
! hostname P3
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id ${p3IP}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network ${p3IP} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address ${p3IP} 255.255.255.255
!
! interface GigabitEthernet0/1
!  description ** To P2 **
!  ip address 40.40.40.6 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/2
!  description ** To PE2 **
!  ip address 40.40.40.9 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ========================================================
! PE2 Router Configuration (Destination: ${destIP})
! ========================================================
!
! hostname PE2
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id ${destIP}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network ${destIP} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address ${destIP} 255.255.255.255
!
! interface GigabitEthernet0/1
!  description ** From P1 **
!  ip address 40.40.40.1 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/2
!  description ** From P3 **
!  ip address 40.40.40.10 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ========================================================
! Verification Commands
! ========================================================
! show mpls traffic-eng tunnels brief
! show mpls traffic-eng tunnels ${tunnel1Intf}
! show mpls traffic-eng tunnels ${tunnel2Intf}
! show mpls traffic-eng tunnels ${tunnel1Intf} detail
! show mpls traffic-eng tunnels ${tunnel2Intf} detail
! show mpls traffic-eng topology
! show ip rsvp interface
! show ip rsvp sender
! show ip rsvp reservation
! show ip explicit-paths
! show mpls traffic-eng link-management interfaces
! show mpls traffic-eng link-management bandwidth-allocation
! show mpls traffic-eng link-management admission-control
!
! ========================================================
! Monitoring & Troubleshooting Commands
! ========================================================
! show mpls traffic-eng tunnels statistics
! show mpls traffic-eng autoroute
! show mpls traffic-eng fast-reroute database
! show ip route
! traceroute mpls traffic-eng tunnel ${tunnel1Intf}
! traceroute mpls traffic-eng tunnel ${tunnel2Intf}
! debug mpls traffic-eng path
! debug ip rsvp
!
! ========================================================
! Configuration Notes & Best Practices
! ========================================================
! 
! 1. PATH SELECTION PRIORITY:
!    - Tunnel 2 (path-option 1) will be preferred due to lower TE metric (50 vs 100)
!    - If Tunnel 2 path fails, traffic automatically fails over to Tunnel 1
!    - Path-option numbers determine preference (lower = higher priority)
!
! 2. TE METRIC vs IGP METRIC:
!    - IGP metric: 100 (same for all links, determines routing when TE is not used)
!    - TE administrative-weight: 100 for P1 path, 50 for P2-P3 path
!    - Lower TE weight = more preferred path for TE tunnels
!
! 3. EXPLICIT PATHS:
!    - PATH-VIA-P1: Explicitly routes through P1 only
!    - PATH-VIA-P2-P3: Explicitly routes through P2 then P3
!    - Dynamic path-option as backup if explicit paths fail
!
! 4. BANDWIDTH MANAGEMENT:
!    - RSVP reserves bandwidth on each link
!    - Auto-bandwidth adjusts tunnel BW based on actual traffic
!    - Set max-bw to 150% and min-bw to 20% of configured bandwidth
!
! 5. FAST REROUTE (FRR):
!    - Provides sub-50ms failover protection
!    - Pre-establishes backup paths around potential failures
!    - Requires FRR to be enabled on all P routers
!
! 6. VERIFICATION STEPS:
!    a) Verify tunnel state: "show mpls traffic-eng tunnels brief"
!       Both tunnels should show "up/up"
!    b) Check RSVP path: "show ip rsvp sender"
!    c) Verify bandwidth reservation: "show mpls traffic-eng link-management"
!    d) Test traffic flow: Use traceroute to confirm path selection
!
! 7. TROUBLESHOOTING:
!    - If tunnel is down/down: Check RSVP, bandwidth availability
!    - If wrong path selected: Verify TE metrics and path-option priority
!    - If no bandwidth: Increase RSVP bandwidth on interfaces
!    - Use "mpls traffic-eng reoptimize" to trigger path recalculation
!
! ========================================================`;

            document.getElementById('mplsTeTemplate').value = config;
        }

        function generateQoSConfig() {
            const voiceBW = document.getElementById('qosVoiceBW').value || '20';
            const videoBW = document.getElementById('qosVideoBW').value || '25';
            const criticalBW = document.getElementById('qosCriticalBW').value || '25';
            const interface = document.getElementById('qosInterface').value || 'GigabitEthernet0/0/0';
            const policyName = document.getElementById('qosPolicyName').value || 'ENTERPRISE-QOS';

            const config = `! QoS Configuration Template
! Generated: ${new Date().toLocaleString()}
! =====================================

! Class maps for traffic classification
class-map match-all VOICE
 match dscp ef

class-map match-all VOICE-CONTROL
 match dscp cs3

class-map match-all VIDEO
 match dscp af41 af42

class-map match-all CRITICAL-DATA
 match dscp af31 af32

! Policy map for egress queuing
policy-map ${policyName}
 class VOICE
  priority percent ${voiceBW}
  set dscp ef
 class VOICE-CONTROL
  bandwidth percent 5
  set dscp cs3
 class VIDEO
  bandwidth percent ${videoBW}
  set dscp af41
  random-detect dscp-based
 class CRITICAL-DATA
  bandwidth percent ${criticalBW}
  set dscp af31
  random-detect dscp-based
 class class-default
  bandwidth percent ${100 - parseInt(voiceBW) - 5 - parseInt(videoBW) - parseInt(criticalBW)}
  random-detect

! Interface configuration
interface ${interface}
 description WAN Interface with QoS
 service-policy output ${policyName}

! Verification Commands
! show policy-map interface ${interface}
! show class-map
! show policy-map ${policyName}`;

            document.getElementById('qosTemplate').value = config;
        }

        function generateL2VPNConfig() {
            const pe1RouterName = document.getElementById('pe1RouterName').value || 'Green';
            const pe1LoopbackIP = document.getElementById('pe1LoopbackIP').value || '10.10.10.1';
            const pe1LocalInterface = document.getElementById('pe1LocalInterface').value || 'GigabitEthernet1/0/1';
            const pe2RouterName = document.getElementById('pe2RouterName').value || 'Blue';
            const pe2LoopbackIP = document.getElementById('pe2LoopbackIP').value || '10.10.10.2';
            const pe2LocalInterface = document.getElementById('pe2LocalInterface').value || 'GigabitEthernet1/0/1';
            const vcId = document.getElementById('vcId').value || '10007';
            const pwClassName = document.getElementById('pwClassName').value || `${pe1RouterName}_${pe2RouterName}`;

            let config = `! ========================================================
! L2VPN xConnect Configuration
! Generated: ${new Date().toLocaleString()}
! ========================================================
!
! This configuration creates a point-to-point Layer 2 VPN
! between two PE routers using MPLS pseudowire
!
! ========================================================
! PE1 Router: ${pe1RouterName} (Loopback: ${pe1LoopbackIP})
! ========================================================

! Configure pseudowire class
pseudowire-class ${pwClassName}
 encapsulation mpls
!

! Configure interface for xConnect
interface ${pe1LocalInterface}
 description ** ${pe2RouterName} Connect To ${pe1RouterName} **
 no ip address
 no keepalive
 xconnect ${pe2LoopbackIP} ${vcId} pw-class ${pwClassName}
!

! ========================================================
! PE2 Router: ${pe2RouterName} (Loopback: ${pe2LoopbackIP})
! ========================================================

! Configure pseudowire class
pseudowire-class ${pwClassName}
 encapsulation mpls
!

! Configure interface for xConnect
interface ${pe2LocalInterface}
 description ** ${pe1RouterName} Connect To ${pe2RouterName} **
 no ip address
 no keepalive
 xconnect ${pe1LoopbackIP} ${vcId} pw-class ${pwClassName}
!

! ========================================================
! Verification Commands
! ========================================================
! show xconnect all
! show xconnect all details
! show mpls l2transport vc
! show mpls l2transport vc ${vcId}
! show mpls l2transport summary
! show mpls l2transport binding
!
! ========================================================
! Troubleshooting Commands
! ========================================================
! debug mpls l2transport vc event
! debug mpls l2transport vc fsm
! show mpls forwarding-table
! show mpls ldp neighbor
! ping mpls pseudowire ${pe2LoopbackIP} ${vcId}
!
! ========================================================
! Additional Configuration Notes
! ========================================================
! 1. Ensure MPLS is enabled on all core interfaces
! 2. Verify LDP or RSVP-TE is configured for label distribution
! 3. Confirm IP reachability between PE routers' loopback interfaces
! 4. MTU configuration may be required for jumbo frames
! 5. Consider configuring backup pseudowire for redundancy
!
! Example MPLS base configuration (if not already configured):
! ---------------------------------------------------------
! mpls ip
! mpls label protocol ldp
! mpls ldp router-id Loopback0 force
! 
! interface GigabitEthernet0/0/0
!  description MPLS Core Interface
!  mpls ip
!
! ========================================================`;

            document.getElementById('l2vpnTemplate').value = config;
        }

        // Function to update L2VPN diagram dynamically
        function updateL2VPNDiagram() {
            const pe1IP = document.getElementById('pe1LoopbackIP')?.value || '10.10.10.1';
            const pe2IP = document.getElementById('pe2LoopbackIP')?.value || '10.10.10.2';
            const vcId = document.getElementById('vcId')?.value || '10007';

            const diagramPE1 = document.getElementById('diagram-pe1-ip');
            const diagramPE2 = document.getElementById('diagram-pe2-ip');
            const diagramVCID = document.getElementById('diagram-vcid');

            if (diagramPE1) diagramPE1.textContent = pe1IP;
            if (diagramPE2) diagramPE2.textContent = pe2IP;
            if (diagramVCID) diagramVCID.textContent = vcId;
        }

        function copyTemplate(templateId) {
            const template = document.getElementById(templateId);
            navigator.clipboard.writeText(template.value).then(() => {
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copied!';
                setTimeout(() => button.innerHTML = originalText, 2000);
            }).catch(() => alert('Please copy manually'));
        }

        function downloadTemplate(templateId, filename) {
            const template = document.getElementById(templateId);
            const blob = new Blob([template.value], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Python Script Download Function
        function downloadPythonScript(scriptType) {
            let scriptContent = '';
            let filename = '';

            if (scriptType === 'l2vpn') {
                filename = 'l2vpn_xconnect_generator.py';
                scriptContent = getL2VPNPythonScript();
            } else if (scriptType === 'mpls-te') {
                filename = 'mpls_te_generator.py';
                scriptContent = getMPLSTEPythonScript();
            } else if (scriptType === 'qos') {
                filename = 'qos_generator.py';
                scriptContent = getQoSPythonScript();
            }

            const blob = new Blob([scriptContent], { type: 'text/x-python' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            window.URL.revokeObjectURL(url);

            alert('‚úÖ Python script downloaded successfully!\\n\\nThe script includes:\\n‚Ä¢ Interactive CLI mode\\n‚Ä¢ CSV bulk import support\\n‚Ä¢ Error validation\\n‚Ä¢ Professional code quality\\n\\nRun: python3 ' + filename);
        }

        // L2VPN Python Script Content
        function getL2VPNPythonScript() {
            return `#!/usr/bin/env python3
"""
L2VPN xConnect Configuration Generator
Created by: Network Engineering Tools Suite
Description: Generates L2VPN xConnect configurations for point-to-point connections
Version: 2.0 - Updated to match web generator
License: Free to use and modify
"""

import csv
import sys
from datetime import datetime

class L2VPNGenerator:
    def __init__(self):
        self.services = []
        
    def add_service(self, pe1_name, pe1_loopback, pe1_interface, pe2_name, 
                   pe2_loopback, pe2_interface, vc_id, pw_class_name):
        """Add L2VPN xConnect service configuration"""
        service = {
            'pe1_name': pe1_name,
            'pe1_loopback': pe1_loopback,
            'pe1_interface': pe1_interface,
            'pe2_name': pe2_name,
            'pe2_loopback': pe2_loopback,
            'pe2_interface': pe2_interface,
            'vc_id': vc_id,
            'pw_class_name': pw_class_name
        }
        self.services.append(service)
        
    def generate_config(self, service):
        """Generate L2VPN xConnect configuration"""
        config = f"""! ========================================================
! L2VPN xConnect Configuration
! Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
! ========================================================
!
! This configuration creates a point-to-point Layer 2 VPN
! between two PE routers using MPLS pseudowire
!
! ========================================================
! PE1 Router: {service['pe1_name']} (Loopback: {service['pe1_loopback']})
! ========================================================

! Configure pseudowire class
pseudowire-class {service['pw_class_name']}
 encapsulation mpls
!

! Configure interface for xConnect
interface {service['pe1_interface']}
 description ** {service['pe2_name']} Connect To {service['pe1_name']} **
 no ip address
 no keepalive
 xconnect {service['pe2_loopback']} {service['vc_id']} pw-class {service['pw_class_name']}
!

! ========================================================
! PE2 Router: {service['pe2_name']} (Loopback: {service['pe2_loopback']})
! ========================================================

! Configure pseudowire class
pseudowire-class {service['pw_class_name']}
 encapsulation mpls
!

! Configure interface for xConnect
interface {service['pe2_interface']}
 description ** {service['pe1_name']} Connect To {service['pe2_name']} **
 no ip address
 no keepalive
 xconnect {service['pe1_loopback']} {service['vc_id']} pw-class {service['pw_class_name']}
!

! ========================================================
! Verification Commands
! ========================================================
! show xconnect all
! show xconnect all details
! show mpls l2transport vc
! show mpls l2transport vc {service['vc_id']}
! show mpls l2transport summary
! show mpls l2transport binding
!
! ========================================================
! Troubleshooting Commands
! ========================================================
! debug mpls l2transport vc event
! debug mpls l2transport vc fsm
! show mpls forwarding-table
! show mpls ldp neighbor
! ping mpls pseudowire {service['pe2_loopback']} {service['vc_id']}
!
! ========================================================
! Additional Configuration Notes
! ========================================================
! 1. Ensure MPLS is enabled on all core interfaces
! 2. Verify LDP or RSVP-TE is configured for label distribution
! 3. Confirm IP reachability between PE routers' loopback interfaces
! 4. MTU configuration may be required for jumbo frames
! 5. Consider configuring backup pseudowire for redundancy
!
! Example MPLS base configuration (if not already configured):
! ---------------------------------------------------------
! mpls ip
! mpls label protocol ldp
! mpls ldp router-id Loopback0 force
! 
! interface GigabitEthernet0/0/0
!  description MPLS Core Interface
!  mpls ip
!
! ========================================================
"""
        return config
        
    def import_from_csv(self, filename):
        """Import services from CSV file"""
        try:
            with open(filename, 'r') as csvfile:
                reader = csv.DictReader(csvfile)
                for row in reader:
                    self.add_service(
                        row['pe1_name'], row['pe1_loopback'], row['pe1_interface'],
                        row['pe2_name'], row['pe2_loopback'], row['pe2_interface'],
                        row['vc_id'], row['pw_class_name']
                    )
            print(f"‚úÖ Successfully imported {len(self.services)} services")
        except Exception as e:
            print(f"‚ùå Error importing CSV: {e}")
            sys.exit(1)
            
    def export_configs(self):
        """Export all configurations to file"""
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        filename = f"l2vpn_xconnect_configs_{timestamp}.txt"
        
        with open(filename, 'w') as f:
            for service in self.services:
                config = self.generate_config(service)
                f.write(config)
                f.write("\\n" + "="*60 + "\\n\\n")
                
        print(f"‚úÖ Configurations exported to {filename}")
        return filename

def interactive_mode():
    """Interactive CLI mode"""
    print("\\n" + "="*60)
    print("L2VPN xConnect Configuration Generator")
    print("="*60 + "\\n")
    
    generator = L2VPNGenerator()
    
    while True:
        print("\\nEnter L2VPN service details (or 'done' to finish):")
        
        pe1_name = input("PE1 Router Name [Green]: ").strip() or "Green"
        if pe1_name.lower() == 'done':
            break
            
        pe1_loopback = input("PE1 Loopback IP [10.10.10.1]: ").strip() or "10.10.10.1"
        pe1_interface = input("PE1 Local Interface [GigabitEthernet1/0/1]: ").strip() or "GigabitEthernet1/0/1"
        pe2_name = input("PE2 Router Name [Blue]: ").strip() or "Blue"
        pe2_loopback = input("PE2 Loopback IP [10.10.10.2]: ").strip() or "10.10.10.2"
        pe2_interface = input("PE2 Local Interface [GigabitEthernet1/0/1]: ").strip() or "GigabitEthernet1/0/1"
        vc_id = input("VC ID [10007]: ").strip() or "10007"
        pw_class_name = input(f"Pseudowire Class Name [{pe1_name}_{pe2_name}]: ").strip() or f"{pe1_name}_{pe2_name}"
        
        generator.add_service(pe1_name, pe1_loopback, pe1_interface, 
                            pe2_name, pe2_loopback, pe2_interface,
                            vc_id, pw_class_name)
        print("‚úÖ Service added!")
    
    if generator.services:
        filename = generator.export_configs()
        print(f"\\n‚úÖ Generated {len(generator.services)} configurations")
        print(f"üìÑ Saved to: {filename}")
    else:
        print("\\n‚ö†Ô∏è  No services configured")

def csv_mode():
    """CSV import mode"""
    print("\\n" + "="*60)
    print("CSV Import Mode")
    print("="*60 + "\\n")
    print("CSV file format required:")
    print("pe1_name,pe1_loopback,pe1_interface,pe2_name,pe2_loopback,pe2_interface,vc_id,pw_class_name\\n")
    
    csv_file = input("\\nEnter CSV filename: ").strip()
    
    if not csv_file:
        print("‚ùå No filename provided")
        return
        
    generator = L2VPNGenerator()
    generator.import_from_csv(csv_file)
    
    if generator.services:
        filename = generator.export_configs()
        print(f"\\n‚úÖ Generated {len(generator.services)} configurations")
        print(f"üìÑ Saved to: {filename}")

def main():
    """Main function"""
    print("\\n" + "="*60)
    print("L2VPN xConnect Configuration Generator v2.0")
    print("="*60)
    print("\\nSelect mode:")
    print("1. Interactive mode")
    print("2. CSV import mode")
    print("3. Exit")
    
    choice = input("\\nEnter choice (1-3): ").strip()
    
    if choice == '1':
        interactive_mode()
    elif choice == '2':
        csv_mode()
    elif choice == '3':
        print("\\nExiting...")
        sys.exit(0)
    else:
        print("\\n‚ùå Invalid choice")
        sys.exit(1)

if __name__ == "__main__":
    main()
`;
        }

        // MPLS-TE Python Script Content
        function getMPLSTEPythonScript() {
            return `#!/usr/bin/env python3
"""
MPLS Traffic Engineering - Dual Tunnel Configuration Generator
Created by: Network Engineering Tools Suite
Description: Generates MPLS-TE dual tunnel configurations matching web generator
Version: 2.0 - Updated for dual-tunnel topology
License: Free to use and modify
"""

import sys
from datetime import datetime

class MPLSTEGenerator:
    def __init__(self):
        self.configs = []
        
    def add_dual_tunnel_config(self, pe1_router_id, pe2_router_id, 
                               tunnel1_intf, tunnel1_bw, tunnel2_intf, tunnel2_bw,
                               p1_ip, p2_ip, p3_ip, interface1, interface2):
        """Add dual-tunnel MPLS-TE configuration"""
        config = {
            'pe1_router_id': pe1_router_id,
            'pe2_router_id': pe2_router_id,
            'tunnel1_intf': tunnel1_intf,
            'tunnel1_bw': int(tunnel1_bw),
            'tunnel2_intf': tunnel2_intf,
            'tunnel2_bw': int(tunnel2_bw),
            'p1_ip': p1_ip,
            'p2_ip': p2_ip,
            'p3_ip': p3_ip,
            'interface1': interface1,
            'interface2': interface2
        }
        self.configs.append(config)
        
    def generate_config(self, cfg):
        """Generate complete MPLS-TE dual tunnel configuration"""
        config = f"""! ========================================================
! MPLS Traffic Engineering - Dual Tunnel Configuration
! Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
! ========================================================
!
! Network Topology:
! CE1 -- PE1 -- [Tunnel1: P1] -- PE2 -- CE2
!           \\\\                  /
!            [Tunnel2: P2-P3]--
!
! Tunnel 1 (Blue Path): PE1 ‚Üí P1 ‚Üí PE2
!   - IGP Metric: 100, TE Metric: 100
!   - Higher TE cost, used when Tunnel 2 unavailable
!
! Tunnel 2 (Green Path): PE1 ‚Üí P2 ‚Üí P3 ‚Üí PE2
!   - IGP Metric: 100, TE Metric: 50
!   - Lower TE cost, preferred path for TE traffic
!
! ========================================================
! PE1 Router Configuration (Source: {cfg['pe1_router_id']})
! ========================================================

hostname PE1

! Enable MPLS globally
mpls ip
mpls label protocol ldp
mpls ldp router-id Loopback0 force

! Enable MPLS Traffic Engineering globally
mpls traffic-eng tunnels

! ========================================================
! RSVP Configuration
! ========================================================

! Enable RSVP globally for TE signaling
ip rsvp bandwidth

! ========================================================
! IGP Configuration (OSPF with TE Extensions)
! ========================================================

router ospf 1
 router-id {cfg['pe1_router_id']}
 mpls traffic-eng router-id Loopback0
 mpls traffic-eng area 0
 network {cfg['pe1_router_id']} 0.0.0.0 area 0
!

! ========================================================
! Interface Configuration - PE1
! ========================================================

! Loopback interface
interface Loopback0
 ip address {cfg['pe1_router_id']} 255.255.255.255
 ip ospf 1 area 0
!

! Interface to P1 (Tunnel 1 path)
interface {cfg['interface1']}
 description ** Connection to P1 - Tunnel 1 Path **
 ip address 30.30.30.1 255.255.255.252
 ip ospf network point-to-point
 ip ospf cost 100
 ip ospf 1 area 0
 mpls ip
 mpls traffic-eng tunnels
 mpls traffic-eng administrative-weight 100
 ip rsvp bandwidth {cfg['tunnel1_bw']}
!

! Interface to P2 (Tunnel 2 path)
interface {cfg['interface2']}
 description ** Connection to P2 - Tunnel 2 Path **
 ip address 30.30.30.5 255.255.255.252
 ip ospf network point-to-point
 ip ospf cost 100
 ip ospf 1 area 0
 mpls ip
 mpls traffic-eng tunnels
 mpls traffic-eng administrative-weight 50
 ip rsvp bandwidth {cfg['tunnel2_bw']}
!

! ========================================================
! MPLS-TE Tunnel 1 Configuration (via P1)
! ========================================================

interface {cfg['tunnel1_intf']}
 description ** TE Tunnel to PE2 via P1 (IGP:100 TE:100) **
 ip unnumbered Loopback0
 tunnel destination {cfg['pe2_router_id']}
 tunnel mode mpls traffic-eng
 tunnel mpls traffic-eng autoroute announce
 tunnel mpls traffic-eng priority 7 7
 tunnel mpls traffic-eng bandwidth {cfg['tunnel1_bw']}
 tunnel mpls traffic-eng path-option 10 explicit name PATH-VIA-P1
 tunnel mpls traffic-eng path-option 20 dynamic
!

! Explicit path for Tunnel 1
ip explicit-path name PATH-VIA-P1 enable
 next-address {cfg['p1_ip']}
!

! ========================================================
! MPLS-TE Tunnel 2 Configuration (via P2-P3)
! ========================================================

interface {cfg['tunnel2_intf']}
 description ** TE Tunnel to PE2 via P2-P3 (IGP:100 TE:50) - PREFERRED **
 ip unnumbered Loopback0
 tunnel destination {cfg['pe2_router_id']}
 tunnel mode mpls traffic-eng
 tunnel mpls traffic-eng autoroute announce
 tunnel mpls traffic-eng priority 7 7
 tunnel mpls traffic-eng bandwidth {cfg['tunnel2_bw']}
 tunnel mpls traffic-eng path-option 1 explicit name PATH-VIA-P2-P3
 tunnel mpls traffic-eng path-option 10 dynamic
!

! Explicit path for Tunnel 2
ip explicit-path name PATH-VIA-P2-P3 enable
 next-address {cfg['p2_ip']}
 next-address {cfg['p3_ip']}
!

! ========================================================
! Advanced TE Features
! ========================================================

! Auto-bandwidth for Tunnel 1
interface {cfg['tunnel1_intf']}
 tunnel mpls traffic-eng auto-bw
 tunnel mpls traffic-eng auto-bw frequency 60
 tunnel mpls traffic-eng auto-bw max-bw {int(cfg['tunnel1_bw'] * 1.5)}
 tunnel mpls traffic-eng auto-bw min-bw {int(cfg['tunnel1_bw'] * 0.2)}
!

! Auto-bandwidth for Tunnel 2
interface {cfg['tunnel2_intf']}
 tunnel mpls traffic-eng auto-bw
 tunnel mpls traffic-eng auto-bw frequency 60
 tunnel mpls traffic-eng auto-bw max-bw {int(cfg['tunnel2_bw'] * 1.5)}
 tunnel mpls traffic-eng auto-bw min-bw {int(cfg['tunnel2_bw'] * 0.2)}
!

! Fast Reroute (FRR) for protection
interface {cfg['tunnel1_intf']}
 tunnel mpls traffic-eng fast-reroute
!

interface {cfg['tunnel2_intf']}
 tunnel mpls traffic-eng fast-reroute
!

! ========================================================
! P Router Configurations
! ========================================================

! ---------------------------------------------------------
! P1 Router Configuration (IGP: 100, TE: 100)
! ---------------------------------------------------------
!
! hostname P1
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id {cfg['p1_ip']}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network {cfg['p1_ip']} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address {cfg['p1_ip']} 255.255.255.255
!
! interface GigabitEthernet0/0
!  description ** To PE1 **
!  ip address 30.30.30.2 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/1
!  description ** To PE2 **
!  ip address 40.40.40.2 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!

! ---------------------------------------------------------
! P2 Router Configuration (IGP: 100, TE: 50)
! ---------------------------------------------------------
!
! hostname P2
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id {cfg['p2_ip']}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network {cfg['p2_ip']} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address {cfg['p2_ip']} 255.255.255.255
!
! interface GigabitEthernet0/0
!  description ** To PE1 **
!  ip address 30.30.30.6 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/1
!  description ** To P3 **
!  ip address 40.40.40.5 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ---------------------------------------------------------
! P3 Router Configuration (IGP: 100, TE: 50)
! ---------------------------------------------------------
!
! hostname P3
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id {cfg['p3_ip']}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network {cfg['p3_ip']} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address {cfg['p3_ip']} 255.255.255.255
!
! interface GigabitEthernet0/1
!  description ** To P2 **
!  ip address 40.40.40.6 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/2
!  description ** To PE2 **
!  ip address 40.40.40.9 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ========================================================
! PE2 Router Configuration (Destination: {cfg['pe2_router_id']})
! ========================================================
!
! hostname PE2
!
! mpls ip
! mpls traffic-eng tunnels
!
! router ospf 1
!  router-id {cfg['pe2_router_id']}
!  mpls traffic-eng router-id Loopback0
!  mpls traffic-eng area 0
!  network {cfg['pe2_router_id']} 0.0.0.0 area 0
!
! interface Loopback0
!  ip address {cfg['pe2_router_id']} 255.255.255.255
!
! interface GigabitEthernet0/1
!  description ** From P1 **
!  ip address 40.40.40.1 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 100
!  ip rsvp bandwidth
!
! interface GigabitEthernet0/2
!  description ** From P3 **
!  ip address 40.40.40.10 255.255.255.252
!  ip ospf cost 100
!  mpls ip
!  mpls traffic-eng tunnels
!  mpls traffic-eng administrative-weight 50
!  ip rsvp bandwidth
!

! ========================================================
! Verification Commands
! ========================================================
! show mpls traffic-eng tunnels brief
! show mpls traffic-eng tunnels {cfg['tunnel1_intf']}
! show mpls traffic-eng tunnels {cfg['tunnel2_intf']}
! show mpls traffic-eng topology
! show ip rsvp interface
! show mpls traffic-eng link-management interfaces
!
! ========================================================
"""
        return config
        
    def export_configs(self):
        """Export all configurations to file"""
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        filename = f"mpls_te_dual_tunnel_configs_{timestamp}.txt"
        
        with open(filename, 'w') as f:
            for cfg in self.configs:
                config = self.generate_config(cfg)
                f.write(config)
                f.write("\\n" + "="*60 + "\\n\\n")
                
        print(f"‚úÖ Configurations exported to {filename}")
        return filename

def interactive_mode():
    """Interactive CLI mode"""
    print("\\n" + "="*60)
    print("MPLS-TE Dual Tunnel Configuration Generator v2.0")
    print("="*60 + "\\n")
    
    generator = MPLSTEGenerator()
    
    print("Enter dual-tunnel MPLS-TE configuration details:\\n")
    
    pe1_router_id = input("PE1 Router ID [1.1.1.1]: ").strip() or "1.1.1.1"
    pe2_router_id = input("PE2 Router ID [2.2.2.2]: ").strip() or "2.2.2.2"
    
    print("\\nTunnel 1 Configuration (via P1):")
    tunnel1_intf = input("Tunnel 1 Interface [Tunnel1]: ").strip() or "Tunnel1"
    tunnel1_bw = input("Tunnel 1 Bandwidth (Kbps) [100000]: ").strip() or "100000"
    
    print("\\nTunnel 2 Configuration (via P2-P3):")
    tunnel2_intf = input("Tunnel 2 Interface [Tunnel2]: ").strip() or "Tunnel2"
    tunnel2_bw = input("Tunnel 2 Bandwidth (Kbps) [50000]: ").strip() or "50000"
    
    print("\\nP Router IPs:")
    p1_ip = input("P1 Router IP [10.1.1.1]: ").strip() or "10.1.1.1"
    p2_ip = input("P2 Router IP [10.2.2.2]: ").strip() or "10.2.2.2"
    p3_ip = input("P3 Router IP [10.3.3.3]: ").strip() or "10.3.3.3"
    
    print("\\nPE1 Interfaces:")
    interface1 = input("PE1‚ÜíP1 Interface [GigabitEthernet0/1]: ").strip() or "GigabitEthernet0/1"
    interface2 = input("PE1‚ÜíP2 Interface [GigabitEthernet0/2]: ").strip() or "GigabitEthernet0/2"
    
    generator.add_dual_tunnel_config(pe1_router_id, pe2_router_id, tunnel1_intf, 
                                    tunnel1_bw, tunnel2_intf, tunnel2_bw,
                                    p1_ip, p2_ip, p3_ip, interface1, interface2)
    
    filename = generator.export_configs()
    print(f"\\n‚úÖ Generated dual-tunnel MPLS-TE configuration")
    print(f"üìÑ Saved to: {filename}")

def main():
    """Main function"""
    print("\\n" + "="*60)
    print("MPLS-TE Dual Tunnel Configuration Generator v2.0")
    print("="*60)
    print("\\nThis tool generates MPLS-TE configurations with:")
    print("  ‚Ä¢ Tunnel 1: Primary path via P1 (TE weight: 100)")
    print("  ‚Ä¢ Tunnel 2: Preferred path via P2-P3 (TE weight: 50)")
    print("  ‚Ä¢ Auto-bandwidth and Fast Reroute enabled")
    print("  ‚Ä¢ Complete PE and P router configurations")
    
    interactive_mode()

if __name__ == "__main__":
    main()
`;
        }

        // QoS Python Script Content
        function getQoSPythonScript() {
            return `#!/usr/bin/env python3
"""
QoS Configuration Generator
Created by: CCIE #58249
Description: Generates enterprise QoS configurations with bandwidth calculation
Version: 1.0
License: Free to use and modify
"""

import sys
from datetime import datetime

class QoSGenerator:
    def __init__(self, total_bandwidth_mbps):
        self.total_bandwidth_mbps = total_bandwidth_mbps
        self.total_bandwidth_kbps = total_bandwidth_mbps * 1000
        self.classes = []
        
    def add_traffic_class(self, name, description, match_criteria, 
                         bandwidth_percent, dscp_mark, priority=False):
        """Add traffic class to QoS policy"""
        bandwidth_kbps = int((self.total_bandwidth_kbps * bandwidth_percent) / 100)
        
        traffic_class = {
            'name': name,
            'description': description,
            'match_criteria': match_criteria,
            'bandwidth_percent': bandwidth_percent,
            'bandwidth_kbps': bandwidth_kbps,
            'dscp_mark': dscp_mark,
            'priority': priority
        }
        self.classes.append(traffic_class)
        
    def validate_bandwidth(self):
        """Validate total bandwidth allocation"""
        total = sum(c['bandwidth_percent'] for c in self.classes)
        if total > 100:
            print(f"‚ö†Ô∏è  Warning: Total bandwidth allocation ({total}%) exceeds 100%")
            return False
        elif total < 95:
            print(f"‚ÑπÔ∏è  Info: Total allocation is {total}%. Remaining: {100-total}%")
        return True
        
    def generate_class_map(self, traffic_class):
        """Generate class-map configuration"""
        config = f"""
class-map match-any {traffic_class['name']}
 description {traffic_class['description']}
"""
        for criterion in traffic_class['match_criteria']:
            config += f" {criterion}\\n"
        return config
        
    def generate_policy_map(self, policy_name):
        """Generate complete policy-map configuration"""
        config = f"""
! ============================================
! QoS Policy Map: {policy_name}
! Total Bandwidth: {self.total_bandwidth_mbps} Mbps
! Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
! ============================================

policy-map {policy_name}
 description Enterprise QoS Policy for {self.total_bandwidth_mbps}Mbps Link
 
"""
        
        for tc in self.classes:
            config += f" class {tc['name']}\\n"
            
            if tc['priority']:
                config += f"  priority percent {tc['bandwidth_percent']}\\n"
            else:
                config += f"  bandwidth percent {tc['bandwidth_percent']}\\n"
                config += f"  random-detect dscp-based\\n"
                
            config += f"  set dscp {tc['dscp_mark']}\\n"
            config += f"  ! Allocated: {tc['bandwidth_kbps']} kbps\\n"
            config += "  \\n"
            
        config += f""" class class-default
  fair-queue
  random-detect
  set dscp default

! Interface Application
interface GigabitEthernet0/0/0
 bandwidth {self.total_bandwidth_kbps}
 service-policy output {policy_name}
"""
        return config
        
    def generate_complete_config(self, policy_name="WAN-EDGE-QOS"):
        """Generate complete QoS configuration"""
        config = "! Complete QoS Configuration\\n"
        config += "! " + "="*58 + "\\n\\n"
        
        config += "! Traffic Classification\\n"
        for tc in self.classes:
            config += self.generate_class_map(tc)
            
        config += "\\n" + self.generate_policy_map(policy_name)
        
        config += """
! Verification Commands:
! show policy-map
! show policy-map interface gi0/0/0
! show class-map

! Bandwidth Allocation Summary:
"""
        total_allocated = 0
        for tc in self.classes:
            config += f"! {tc['name']:<20} {tc['bandwidth_percent']:>3}% ({tc['bandwidth_kbps']:>8} kbps)\\n"
            total_allocated += tc['bandwidth_percent']
            
        config += f"! {'TOTAL':<20} {total_allocated:>3}%\\n"
        
        return config
        
    def export_config(self, filename=None):
        """Export configuration to file"""
        if not filename:
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            filename = f"qos_config_{self.total_bandwidth_mbps}mbps_{timestamp}.txt"
            
        with open(filename, 'w') as f:
            f.write(self.generate_complete_config())
            
        print(f"‚úÖ Configuration exported to {filename}")
        return filename

def create_standard_policy(bandwidth_mbps):
    """Create standard enterprise QoS policy"""
    generator = QoSGenerator(bandwidth_mbps)
    
    generator.add_traffic_class("VOICE", "Real-time Voice",
        ["match dscp ef", "match protocol rtp audio"], 10, "ef", priority=True)
    
    generator.add_traffic_class("VIDEO", "Video/Conferencing",
        ["match dscp af41 af42 af43"], 20, "af41", priority=True)
    
    generator.add_traffic_class("CRITICAL-DATA", "Mission-Critical Apps",
        ["match dscp af31 af32 af33"], 25, "af31")
    
    generator.add_traffic_class("TRANSACTIONAL", "Business Data",
        ["match dscp af21 af22 af23"], 20, "af21")
    
    generator.add_traffic_class("BULK-DATA", "Bulk Transfer",
        ["match dscp af11 af12 af13"], 15, "af11")
    
    generator.add_traffic_class("SCAVENGER", "Best-Effort",
        ["match dscp cs1"], 5, "cs1")
    
    return generator

def interactive_mode():
    """Interactive CLI mode"""
    print("\\n" + "="*60)
    print("Enterprise QoS Configuration Generator")
    print("Created by CCIE #58249")
    print("="*60 + "\\n")
    
    bandwidth = int(input("Enter WAN link bandwidth (Mbps): "))
    
    print("\\nQoS Policy Options:")
    print("1. Standard Enterprise Policy")
    print("2. Custom Policy")
    choice = input("Choice [1]: ") or "1"
    
    if choice == "1":
        generator = create_standard_policy(bandwidth)
        
        print("\\nStandard Enterprise Policy:")
        print("  Voice (Priority):      10%")
        print("  Video (Priority):      20%")
        print("  Critical Data:         25%")
        print("  Transactional:         20%")
        print("  Bulk Data:             15%")
        print("  Scavenger:              5%")
        print(f"\\nTotal allocated: 95% ({int(bandwidth * 0.95)} Mbps)")
        
        generator.validate_bandwidth()
        
        print("\\n" + "="*60)
        print("Generated Configuration:")
        print("="*60)
        print(generator.generate_complete_config())
        
        export = input("\\nExport to file? (y/n) [y]: ").lower() or 'y'
        if export == 'y':
            generator.export_config()
    else:
        print("Custom policy creation: Use standard and modify manually")

def main():
    if len(sys.argv) > 1:
        bandwidth = int(sys.argv[1])
        generator = create_standard_policy(bandwidth)
        generator.export_config()
    else:
        interactive_mode()

if __name__ == "__main__":
    main()

"""
Usage:
1. Interactive: python3 qos_generator.py
2. Quick mode: python3 qos_generator.py 100

DSCP Values:
EF (46) - Voice
AF41 (34) - Video
AF31 (26) - Critical Data
AF21 (18) - Transactional
AF11 (10) - Bulk Data
"""
`;
        }

        function analyzeConfig() {
            const input = document.getElementById('configInput').value.trim();
            const selectedIOS = document.querySelector('input[name="ios-version"]:checked').value;

            if (!input) {
                alert('Please enter VRF configuration data before analyzing.');
                return;
            }

            vrfData = parseIOSConfig(input);

            if (vrfData.length === 0) {
                alert('No valid VRF configurations found. Please check your input format.');
                return;
            }

            connections = generateConnections(vrfData);

            // Update network info
            document.getElementById('vrfCount').textContent = vrfData.length;
            document.getElementById('connectionCount').textContent = connections.length;

            displayStats();
            generateNetworkVisualization();
            generateMatrix();

            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function parseIOSConfig(input) {
            const vrfs = [];
            const lines = input.split('\n');
            let currentVrf = null;

            for (let line of lines) {
                line = line.trim();

                if (line.match(/^(ip\s+)?vrf\s+(definition\s+)?(\S+)/i)) {
                    const match = line.match(/^(?:ip\s+)?vrf\s+(?:definition\s+)?(\S+)/i);
                    if (match) {
                        currentVrf = {
                            name: match[1],
                            rd: '',
                            exports: [],
                            imports: [],
                            description: ''
                        };
                        vrfs.push(currentVrf);
                    }
                } else if (currentVrf) {
                    if (line.match(/^\s*description\s+(.+)/i)) {
                        const descMatch = line.match(/^\s*description\s+(.+)/i);
                        if (descMatch) currentVrf.description = descMatch[1].trim();
                    }

                    if (line.match(/^\s*rd\s+(.+)/i)) {
                        const rdMatch = line.match(/^\s*rd\s+(.+)/i);
                        if (rdMatch) currentVrf.rd = rdMatch[1].trim();
                    }

                    if (line.match(/^\s*route-target\s+export\s+(.+)/i)) {
                        const exportMatch = line.match(/^\s*route-target\s+export\s+(.+)/i);
                        if (exportMatch) {
                            exportMatch[1].split(/\s+/).forEach(rt => {
                                if (rt.trim()) currentVrf.exports.push(rt.trim());
                            });
                        }
                    }

                    if (line.match(/^\s*route-target\s+import\s+(.+)/i)) {
                        const importMatch = line.match(/^\s*route-target\s+import\s+(.+)/i);
                        if (importMatch) {
                            importMatch[1].split(/\s+/).forEach(rt => {
                                if (rt.trim()) currentVrf.imports.push(rt.trim());
                            });
                        }
                    }
                }
            }

            return vrfs.filter(vrf => vrf.name);
        }

        function generateConnections(vrfs) {
            const connections = [];

            for (let i = 0; i < vrfs.length; i++) {
                for (let j = 0; j < vrfs.length; j++) {
                    if (i === j) continue;

                    const sourceVrf = vrfs[i];
                    const targetVrf = vrfs[j];

                    const sharedTargets = sourceVrf.exports.filter(exp =>
                        targetVrf.imports.includes(exp)
                    );

                    if (sharedTargets.length > 0) {
                        connections.push({
                            source: sourceVrf.name,
                            target: targetVrf.name,
                            routeTargets: sharedTargets,
                            type: 'export-import'
                        });
                    }
                }
            }

            return connections;
        }

        function displayStats() {
            const totalVrfs = vrfData.length;
            const totalConnections = connections.length;
            const uniqueRouteTargets = new Set();

            vrfData.forEach(vrf => {
                vrf.exports.forEach(rt => uniqueRouteTargets.add(rt));
                vrf.imports.forEach(rt => uniqueRouteTargets.add(rt));
            });

            const totalRouteTargets = uniqueRouteTargets.size;
            const avgConnectionsPerVrf = totalVrfs > 0 ? (totalConnections / totalVrfs).toFixed(1) : 0;

            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-number">${totalVrfs}</div>
                    <div class="stat-label">Total VRFs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalRouteTargets}</div>
                    <div class="stat-label">Route Targets</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalConnections}</div>
                    <div class="stat-label">Connections</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${avgConnectionsPerVrf}</div>
                    <div class="stat-label">Avg Connections</div>
                </div>
            `;

            document.getElementById('statsGrid').innerHTML = statsHtml;
        }

        function generateNetworkVisualization() {
            const canvas = document.getElementById('networkCanvas');
            canvas.innerHTML = '';

            // FORCE canvas to be properly sized before calculation
            const resultsSection = document.getElementById('results');
            if (resultsSection.style.display === 'none') {
                resultsSection.style.display = 'block';
            }

            // Wait for DOM to update, then get dimensions
            setTimeout(() => {
                // Get EXACT canvas dimensions after DOM is ready
                const canvasRect = canvas.getBoundingClientRect();
                const canvasWidth = canvas.clientWidth || canvas.offsetWidth;
                const canvasHeight = canvas.clientHeight || canvas.offsetHeight;

                // FORCE perfect center positioning
                const centerX = canvasWidth / 2;
                const centerY = canvasHeight / 2;

                console.log(`FIXED CENTERING: Canvas ${canvasWidth}x${canvasHeight}, Center: (${centerX}, ${centerY})`);

                // Store positions globally
                window.vrfPositions = {};
                window.connectionPaths = new Map();

                const numVrfs = vrfData.length;

                // Enhanced layout with forced centering
                function calculateForcedCenterLayout() {
                    // Much bigger, clearer segments with generous spacing
                    let segmentConfig;

                    if (numVrfs >= 150) {
                        segmentConfig = {
                            width: 70,
                            height: 30,
                            fontSize: '0.75em',
                            barHeight: 6,
                            minGap: 15,
                            margin: 40
                        };
                    } else if (numVrfs >= 100) {
                        segmentConfig = {
                            width: 85,
                            height: 36,
                            fontSize: '0.8em',
                            barHeight: 7,
                            minGap: 18,
                            margin: 45
                        };
                    } else if (numVrfs >= 70) {
                        segmentConfig = {
                            width: 100,
                            height: 42,
                            fontSize: '0.85em',
                            barHeight: 8,
                            minGap: 22,
                            margin: 50
                        };
                    } else if (numVrfs >= 50) {
                        segmentConfig = {
                            width: 120,
                            height: 48,
                            fontSize: '0.9em',
                            barHeight: 9,
                            minGap: 25,
                            margin: 55
                        };
                    } else if (numVrfs >= 30) {
                        segmentConfig = {
                            width: 140,
                            height: 54,
                            fontSize: '0.95em',
                            barHeight: 10,
                            minGap: 30,
                            margin: 60
                        };
                    } else {
                        segmentConfig = {
                            width: 160,
                            height: 60,
                            fontSize: '1em',
                            barHeight: 11,
                            minGap: 35,
                            margin: 65
                        };
                    }

                    // Calculate required space
                    const totalSegmentSpace = numVrfs * segmentConfig.width;
                    const totalGapSpace = numVrfs * segmentConfig.minGap;
                    const requiredCircumference = totalSegmentSpace + totalGapSpace;
                    const calculatedRadius = requiredCircumference / (2 * Math.PI);

                    // Calculate max available radius using exact center
                    const maxAvailableRadius = (Math.min(canvasWidth, canvasHeight) / 2) - segmentConfig.margin - (segmentConfig.height / 2) - 20;

                    // Use calculated radius but ensure it fits
                    const optimalRadius = Math.max(Math.min(calculatedRadius, maxAvailableRadius), 150);

                    // Recalculate segment width
                    const actualCircumference = 2 * Math.PI * optimalRadius;
                    const actualArcPerVrf = actualCircumference / numVrfs;
                    const finalSegmentWidth = Math.min(
                        segmentConfig.width,
                        Math.max(actualArcPerVrf - segmentConfig.minGap, 50)
                    );

                    return {
                        ...segmentConfig,
                        radius: optimalRadius,
                        finalWidth: finalSegmentWidth,
                        centerX: centerX,  // STORE exact center
                        centerY: centerY,  // STORE exact center
                        canvasWidth: canvasWidth,
                        canvasHeight: canvasHeight
                    };
                }

                const layout = calculateForcedCenterLayout();

                // Generate positions using EXACT center
                function calculateExactCenterPositions() {
                    const positions = [];
                    const angleStep = (2 * Math.PI) / numVrfs;

                    for (let i = 0; i < numVrfs; i++) {
                        const angle = (i * angleStep) - (Math.PI / 2);

                        // Use EXACT stored center coordinates
                        const x = layout.centerX + layout.radius * Math.cos(angle);
                        const y = layout.centerY + layout.radius * Math.sin(angle);

                        positions.push({
                            x: x,
                            y: y,
                            angle: angle,
                            radius: layout.radius,
                            index: i
                        });
                    }

                    return positions;
                }

                const positions = calculateExactCenterPositions();

                // Store positions
                vrfData.forEach((vrf, index) => {
                    if (positions[index]) {
                        window.vrfPositions[vrf.name] = positions[index];
                    }
                });

                // Create VRF segments
                vrfData.forEach((vrf, index) => {
                    const pos = window.vrfPositions[vrf.name];
                    if (!pos) return;

                    const segment = document.createElement('div');
                    segment.className = 'vrf-segment';

                    const segmentWidth = layout.finalWidth;
                    const segmentHeight = layout.height;
                    const segmentX = pos.x - (segmentWidth / 2);
                    const segmentY = pos.y - (segmentHeight / 2);

                    // Enhanced text handling - Showing FULL NAME as requested
                    let displayName = vrf.name;
                    // Truncation removed to show full names like vrf-branch1, vrf-branch2


                    segment.innerHTML = `
                        <div class="vrf-segment-bar"></div>
                        <div class="vrf-segment-label">${displayName}</div>
                    `;

                    segment.style.cssText = `
                        position: absolute;
                        left: ${segmentX}px;
                        top: ${segmentY}px;
                        width: ${segmentWidth}px;
                        height: ${segmentHeight}px;
                        cursor: pointer;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        z-index: 10;
                        box-sizing: border-box;
                        transform-origin: center;
                    `;

                    const bar = segment.querySelector('.vrf-segment-bar');
                    bar.style.cssText = `
                        width: 100%;
                        height: ${layout.barHeight}px;
                        background: linear-gradient(135deg, #22d3ee 0%, #0ea5e9 50%, #0284c7 100%);
                        border-radius: ${Math.max(layout.barHeight / 2, 2)}px;
                        box-shadow: 0 3px 10px rgba(34, 211, 238, 0.4);
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        margin-bottom: 4px;
                    `;

                    const label = segment.querySelector('.vrf-segment-label');
                    label.style.cssText = `
                        text-align: center;
                        font-size: ${layout.fontSize};
                        font-weight: 700;
                        color: #f1f5f9;
                        text-shadow: 0 2px 4px rgba(0,0,0,0.6);
                        line-height: 1.2;
                        overflow: visible; /* Allow full name to be seen */
                        white-space: nowrap;
                        margin: 0;
                        padding: 0 4px;
                        user-select: none;
                    `;

                    const hoverScale = numVrfs >= 100 ? 1.08 : numVrfs >= 50 ? 1.12 : 1.15;

                    segment.addEventListener('mouseenter', function () {
                        this.style.transform = `scale(${hoverScale})`;
                        this.style.zIndex = '30';
                        bar.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%)';
                        bar.style.boxShadow = `0 4px 15px rgba(251, 191, 36, 0.5)`;
                        bar.style.height = `${layout.barHeight + 2}px`;
                    });

                    segment.addEventListener('mouseleave', function () {
                        if (!this.classList.contains('selected')) {
                            this.style.transform = 'scale(1)';
                            this.style.zIndex = '10';
                            bar.style.background = 'linear-gradient(135deg, #22d3ee 0%, #0ea5e9 50%, #0284c7 100%)';
                            bar.style.boxShadow = '0 3px 10px rgba(34, 211, 238, 0.4)';
                            bar.style.height = `${layout.barHeight}px`;
                        }
                    });

                    segment.onclick = () => showVrfInfo(vrf);
                    segment.dataset.vrfName = vrf.name;
                    segment.title = `${vrf.name}\n${vrf.description || 'No description'}\nRD: ${vrf.rd || 'Not configured'}`;

                    canvas.appendChild(segment);
                });

                // Create SVG using exact center
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    pointer-events: none;
                    z-index: 5;
                `;
                canvas.appendChild(svg);

                // Enhanced gradients
                const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                const gradients = [
                    { id: 'chord-gradient-1', colors: ['#22d3ee', '#06b6d4'] },
                    { id: 'chord-gradient-2', colors: ['#a855f7', '#8b5cf6'] },
                    { id: 'chord-gradient-3', colors: ['#f59e0b', '#d97706'] },
                    { id: 'chord-gradient-4', colors: ['#10b981', '#059669'] },
                    { id: 'chord-gradient-5', colors: ['#ef4444', '#dc2626'] },
                    { id: 'chord-gradient-6', colors: ['#f97316', '#ea580c'] },
                    { id: 'chord-gradient-7', colors: ['#8b5cf6', '#7c3aed'] },
                    { id: 'chord-gradient-8', colors: ['#06b6d4', '#0891b2'] },
                    { id: 'chord-gradient-9', colors: ['#84cc16', '#65a30d'] },
                    { id: 'chord-gradient-10', colors: ['#ec4899', '#db2777'] },
                    { id: 'chord-gradient-11', colors: ['#14b8a6', '#0d9488'] },
                    { id: 'chord-gradient-12', colors: ['#f472b6', '#ec4899'] }
                ];

                gradients.forEach(grad => {
                    const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
                    gradient.setAttribute('id', grad.id);
                    gradient.setAttribute('gradientUnits', 'objectBoundingBox');

                    const opacity1 = numVrfs >= 100 ? '0.8' : numVrfs >= 50 ? '0.9' : '1';
                    const opacity2 = numVrfs >= 100 ? '0.6' : numVrfs >= 50 ? '0.7' : '0.8';

                    const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                    stop1.setAttribute('offset', '0%');
                    stop1.setAttribute('stop-color', grad.colors[0]);
                    stop1.setAttribute('stop-opacity', opacity1);

                    const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                    stop2.setAttribute('offset', '100%');
                    stop2.setAttribute('stop-color', grad.colors[1]);
                    stop2.setAttribute('stop-opacity', opacity2);

                    gradient.appendChild(stop1);
                    gradient.appendChild(stop2);
                    defs.appendChild(gradient);
                });

                svg.appendChild(defs);

                // Draw connections using exact center
                connections.forEach((conn, index) => {
                    const sourcePos = window.vrfPositions[conn.source];
                    const targetPos = window.vrfPositions[conn.target];

                    if (!sourcePos || !targetPos) return;

                    let controlIntensity = numVrfs >= 150 ? 0.4 : numVrfs >= 100 ? 0.45 : numVrfs >= 70 ? 0.5 : numVrfs >= 50 ? 0.55 : 0.6;

                    // Use EXACT center coordinates stored in layout
                    const control1X = layout.centerX + (sourcePos.x - layout.centerX) * controlIntensity;
                    const control1Y = layout.centerY + (sourcePos.y - layout.centerY) * controlIntensity;
                    const control2X = layout.centerX + (targetPos.x - layout.centerX) * controlIntensity;
                    const control2Y = layout.centerY + (targetPos.y - layout.centerY) * controlIntensity;

                    const pathData = `M ${sourcePos.x} ${sourcePos.y} C ${control1X} ${control1Y}, ${control2X} ${control2Y}, ${targetPos.x} ${targetPos.y}`;

                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', pathData);

                    const gradientIndex = index % gradients.length;
                    const isReverse = connections.some(c =>
                        c.source === conn.target && c.target === conn.source
                    );

                    let strokeWidth = numVrfs >= 150 ? '2' : numVrfs >= 100 ? '2.5' : numVrfs >= 70 ? '3' : numVrfs >= 50 ? '3.5' : '4';
                    let strokeOpacity = numVrfs >= 150 ? '0.8' : numVrfs >= 100 ? '0.85' : numVrfs >= 70 ? '0.9' : numVrfs >= 50 ? '0.9' : '0.95';

                    if (isReverse) {
                        path.setAttribute('stroke', 'url(#chord-gradient-3)');
                        path.setAttribute('stroke-width', parseFloat(strokeWidth) + 0.5);
                    } else {
                        path.setAttribute('stroke', `url(#chord-gradient-${gradientIndex + 1})`);
                        path.setAttribute('stroke-width', strokeWidth);
                    }

                    path.setAttribute('fill', 'none');
                    path.setAttribute('stroke-linecap', 'round');
                    path.setAttribute('opacity', strokeOpacity);
                    path.dataset.source = conn.source;
                    path.dataset.target = conn.target;
                    path.classList.add('chord-connection');

                    window.connectionPaths.set(`${conn.source}-${conn.target}`, path);
                    svg.appendChild(path);
                });

                // Center decoration using exact center
                const centerSize = Math.max(15, Math.min(35, layout.radius * 0.1));
                const ringSize = Math.max(12, Math.min(28, layout.radius * 0.08));
                const dotSize = Math.max(6, Math.min(18, layout.radius * 0.06));

                const centerDecoration = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                centerDecoration.setAttribute('cx', layout.centerX);
                centerDecoration.setAttribute('cy', layout.centerY);
                centerDecoration.setAttribute('r', centerSize);
                centerDecoration.setAttribute('fill', 'url(#chord-gradient-1)');
                centerDecoration.setAttribute('opacity', '0.15');
                centerDecoration.setAttribute('filter', 'blur(4px)');
                svg.appendChild(centerDecoration);

                const centerRing = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                centerRing.setAttribute('cx', layout.centerX);
                centerRing.setAttribute('cy', layout.centerY);
                centerRing.setAttribute('r', ringSize);
                centerRing.setAttribute('fill', 'none');
                centerRing.setAttribute('stroke', '#22d3ee');
                centerRing.setAttribute('stroke-width', '2');
                centerRing.setAttribute('opacity', '0.4');
                svg.appendChild(centerRing);

                const centerDot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                centerDot.setAttribute('cx', layout.centerX);
                centerDot.setAttribute('cy', layout.centerY);
                centerDot.setAttribute('r', dotSize);
                centerDot.setAttribute('fill', '#22d3ee');
                centerDot.setAttribute('opacity', '0.7');
                svg.appendChild(centerDot);

                // Network stats using exact center
                if (numVrfs >= 15) {
                    const infoGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');

                    const vrfText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    vrfText.setAttribute('x', layout.centerX);
                    vrfText.setAttribute('y', layout.centerY + dotSize + 20);
                    vrfText.setAttribute('text-anchor', 'middle');
                    vrfText.setAttribute('fill', '#64748b');
                    vrfText.setAttribute('font-size', numVrfs >= 100 ? '0.75em' : '0.85em');
                    vrfText.setAttribute('font-weight', '700');
                    vrfText.setAttribute('opacity', '0.8');
                    vrfText.textContent = `${numVrfs} VRFs`;

                    infoGroup.appendChild(vrfText);

                    if (connections.length > 0) {
                        const connText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        connText.setAttribute('x', layout.centerX);
                        connText.setAttribute('y', layout.centerY + dotSize + 36);
                        connText.setAttribute('text-anchor', 'middle');
                        connText.setAttribute('fill', '#64748b');
                        connText.setAttribute('font-size', numVrfs >= 100 ? '0.7em' : '0.8em');
                        connText.setAttribute('font-weight', '600');
                        connText.setAttribute('opacity', '0.7');
                        connText.textContent = `${connections.length} connections`;

                        infoGroup.appendChild(connText);
                    }

                    svg.appendChild(infoGroup);
                }

                console.log(`DIAGRAM PERFECTLY CENTERED at (${layout.centerX}, ${layout.centerY})`);

            }, 50); // Small delay to ensure DOM is ready
        }

        function showVrfInfo(vrf) {
            selectedVRF = vrf.name;

            // Highlight selected VRF segment
            const canvas = document.getElementById('networkCanvas');
            const vrfSegments = canvas.querySelectorAll('.vrf-segment');
            const connectionPaths = canvas.querySelectorAll('.chord-connection');

            vrfSegments.forEach(segment => {
                if (segment.dataset.vrfName === vrf.name) {
                    segment.classList.add('selected');
                    // Update segment styling
                    const bar = segment.querySelector('.vrf-segment-bar');
                    if (bar) {
                        bar.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #b45309 100%)';
                        bar.style.boxShadow = '0 4px 20px rgba(245, 158, 11, 0.6)';
                        bar.style.height = '12px';
                    }
                } else {
                    segment.classList.remove('selected');
                    // Reset segment styling
                    const bar = segment.querySelector('.vrf-segment-bar');
                    if (bar) {
                        bar.style.background = 'linear-gradient(135deg, #22d3ee 0%, #0ea5e9 50%, #0284c7 100%)';
                        bar.style.boxShadow = '0 2px 8px rgba(34, 211, 238, 0.3)';
                        bar.style.height = '8px';
                    }
                }
            });

            // Highlight connected paths
            connectionPaths.forEach(path => {
                if (path.dataset.source === vrf.name || path.dataset.target === vrf.name) {
                    path.setAttribute('stroke', 'url(#chord-gradient-3)'); // Orange gradient
                    path.setAttribute('stroke-width', '4');
                    path.setAttribute('opacity', '0.9');
                    path.style.filter = 'drop-shadow(0 0 8px #f59e0b) brightness(1.3)';
                } else {
                    // Reset to original gradient
                    const gradientIndex = Array.from(connectionPaths).indexOf(path) % 5;
                    path.setAttribute('stroke', `url(#chord-gradient-${gradientIndex + 1})`);
                    path.setAttribute('stroke-width', '2');
                    path.setAttribute('opacity', vrfData.length > 20 ? '0.6' : '0.7');
                    path.style.filter = 'none';
                }
            });

            // Show VRF information panel
            const panel = document.getElementById('vrfInfoPanel');
            const title = document.getElementById('vrfInfoTitle');
            const content = document.getElementById('vrfInfoContent');

            title.textContent = `VRF: ${vrf.name}`;

            content.innerHTML = `
                <div class="info-section">
                    <h4>üè∑Ô∏è Route Distinguisher</h4>
                    <div class="info-list">
                        <div class="info-item">${vrf.rd || 'Not configured'}</div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>üìù Description</h4>
                    <div class="info-list">
                        <div class="info-item">${vrf.description || 'No description'}</div>
                    </div>
                </div>
                <div class="info-section">
                    <h4>üì§ Export Route Targets</h4>
                    <div class="info-list">
                        ${vrf.exports.length ? vrf.exports.map(rt => `<div class="info-item">${rt}</div>`).join('') : '<div class="info-item">None</div>'}
                    </div>
                </div>
                <div class="info-section">
                    <h4>üì• Import Route Targets</h4>
                    <div class="info-list">
                        ${vrf.imports.length ? vrf.imports.map(rt => `<div class="info-item">${rt}</div>`).join('') : '<div class="info-item">None</div>'}
                    </div>
                </div>
                <div class="info-section">
                    <h4>üîó Connections</h4>
                    <div class="info-list">
                        ${connections.filter(conn => conn.source === vrf.name || conn.target === vrf.name).map(conn =>
                `<div class="info-item">${conn.source === vrf.name ? '‚Üí ' + conn.target : '‚Üê ' + conn.source}</div>`
            ).join('') || '<div class="info-item">No connections</div>'}
                    </div>
                </div>
            `;

            panel.classList.add('active');
        }

        function closeVrfInfo() {
            const panel = document.getElementById('vrfInfoPanel');
            panel.classList.remove('active');

            // Remove highlighting from segments
            const canvas = document.getElementById('networkCanvas');
            const vrfSegments = canvas.querySelectorAll('.vrf-segment');
            const connectionPaths = canvas.querySelectorAll('.chord-connection');

            vrfSegments.forEach(segment => {
                segment.classList.remove('selected');
                // Reset segment styling
                const bar = segment.querySelector('.vrf-segment-bar');
                if (bar) {
                    bar.style.background = 'linear-gradient(135deg, #22d3ee 0%, #0ea5e9 50%, #0284c7 100%)';
                    bar.style.boxShadow = '0 2px 8px rgba(34, 211, 238, 0.3)';
                    bar.style.height = '8px';
                }
            });

            connectionPaths.forEach((path, index) => {
                // Reset to original gradient based on index
                const gradientIndex = index % 5;
                const isReverse = connections.some(conn =>
                    conn.source === path.dataset.target && conn.target === path.dataset.source
                );

                if (isReverse) {
                    path.setAttribute('stroke', 'url(#chord-gradient-3)');
                    path.setAttribute('stroke-width', '3');
                } else {
                    path.setAttribute('stroke', `url(#chord-gradient-${gradientIndex + 1})`);
                    path.setAttribute('stroke-width', '2');
                }

                path.setAttribute('opacity', vrfData.length > 20 ? '0.6' : '0.7');
                path.style.filter = 'none';
            });

            selectedVRF = null;
        }

        function stopTrafficAnimation() {
            // Animation removal - no longer needed
            isAnimationRunning = false;
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }
        }

        function startTrafficAnimation() {
            // Animation disabled - clean chord diagram only
            stopTrafficAnimation();
        }

        function toggleAnimation() {
            isAnimationRunning = !isAnimationRunning;
            const icon = document.getElementById('animationIcon');
            const text = document.getElementById('animationText');

            if (isAnimationRunning) {
                icon.textContent = '‚è∏Ô∏è';
                text.textContent = 'Pause Animation';
                // Restart animation if it was paused
                if (!animationInterval) {
                    startTrafficAnimation();
                }
            } else {
                icon.textContent = '‚ñ∂Ô∏è';
                text.textContent = 'Resume Animation';
            }
        }

        function zoomIn() {
            currentZoom = Math.min(currentZoom + 0.2, 2);
            updateZoom();
        }

        function zoomOut() {
            currentZoom = Math.max(currentZoom - 0.2, 0.5);
            updateZoom();
        }

        function resetZoom() {
            currentZoom = 1;
            updateZoom();
        }

        function updateZoom() {
            const canvas = document.getElementById('networkCanvas');
            canvas.style.transform = `scale(${currentZoom})`;
            document.getElementById('zoomLevel').textContent = Math.round(currentZoom * 100) + '%';
        }

        function generateMatrix() {
            let matrixHtml = '<div class="premium-matrix-container"><table class="premium-matrix">';

            // Header Row
            matrixHtml += '<tr><th>Source ‚Üí Target</th>';
            vrfData.forEach(vrf => {
                matrixHtml += `<th>${vrf.name}</th>`;
            });
            matrixHtml += '</tr>';

            // Data Rows
            vrfData.forEach(sourceVrf => {
                matrixHtml += `<tr><td class="source-cell">${sourceVrf.name}</td>`;

                vrfData.forEach(targetVrf => {
                    if (sourceVrf.name === targetVrf.name) {
                        matrixHtml += '<td class="self-cell">‚ñ†</td>';
                    } else {
                        const exportConnection = connections.find(conn =>
                            conn.source === sourceVrf.name && conn.target === targetVrf.name
                        );
                        const importConnection = connections.find(conn =>
                            conn.source === targetVrf.name && conn.target === sourceVrf.name
                        );

                        const hasExport = !!exportConnection;
                        const hasImport = !!importConnection;

                        if (hasExport && hasImport) {
                            matrixHtml += '<td class="bidirectional-cell">‚áÑ</td>';
                        } else if (hasExport) {
                            matrixHtml += '<td class="export-cell">‚Üí</td>';
                        } else if (hasImport) {
                            matrixHtml += '<td class="import-cell">‚Üê</td>';
                        } else {
                            matrixHtml += '<td class="no-conn-cell">-</td>';
                        }
                    }
                });

                matrixHtml += '</tr>';
            });

            matrixHtml += '</table></div>';

            // Legend
            matrixHtml += `
                <div class="matrix-legend">
                    <div class="legend-item">
                        <div class="legend-box" style="background: #d1fae5; color: #065f46; border: 1px solid #10b981;">‚Üí</div>
                        <span>Export Only</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: #dbeafe; color: #1e40af; border: 1px solid #3b82f6;">‚Üê</div>
                        <span>Import Only</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: #fef3c7; color: #92400e; border: 1px solid #f59e0b;">‚áÑ</div>
                        <span>Bidirectional</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: #f8fafc; color: #cbd5e1; border: 1px solid #e5e7eb;">-</div>
                        <span>No Connection</span>
                    </div>
                </div>
            `;

            document.getElementById('matrixContainer').innerHTML = matrixHtml;
        }

        function exportMatrixCSV() {
            if (vrfData.length === 0) {
                alert('Please analyze a configuration first to generate the matrix.');
                return;
            }

            // Create CSV content with UTF-8 BOM for proper Excel encoding
            let csv = '\uFEFF'; // UTF-8 BOM
            csv += 'Source ‚Üí Target';

            // Add header row with all VRF names
            vrfData.forEach(vrf => {
                csv += ',' + vrf.name;
            });
            csv += '\n';

            // Add data rows
            vrfData.forEach(sourceVrf => {
                csv += sourceVrf.name;

                vrfData.forEach(targetVrf => {
                    if (sourceVrf.name === targetVrf.name) {
                        csv += ',‚ñ†';  // Same as HTML output
                    } else {
                        const exportConnection = connections.find(conn =>
                            conn.source === sourceVrf.name && conn.target === targetVrf.name
                        );
                        const importConnection = connections.find(conn =>
                            conn.source === targetVrf.name && conn.target === sourceVrf.name
                        );

                        const hasExport = !!exportConnection;
                        const hasImport = !!importConnection;

                        if (hasExport && hasImport) {
                            csv += ',‚áÑ';  // Bidirectional arrow - same as HTML
                        } else if (hasExport) {
                            csv += ',‚Üí';  // Export arrow - same as HTML
                        } else if (hasImport) {
                            csv += ',‚Üê';  // Import arrow - same as HTML
                        } else {
                            csv += ',-';  // No connection - same as HTML
                        }
                    }
                });

                csv += '\n';
            });

            // Add legend matching HTML output
            csv += '\n';
            csv += 'LEGEND\n';
            csv += 'Symbol,Meaning\n';
            csv += '‚Üí,Export Only (Routes exported from source to target)\n';
            csv += '‚Üê,Import Only (Routes imported from target to source)\n';
            csv += '‚áÑ,Bidirectional (Routes flow in both directions)\n';
            csv += '‚ñ†,Same VRF (Self-reference)\n';
            csv += '-,No Connection (No route-target relationship)\n';

            // Create download link
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);

            link.setAttribute('href', url);
            link.setAttribute('download', 'route-target-matrix-' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Clean up the URL object
            URL.revokeObjectURL(url);
        }

        function clearAll() {
            document.getElementById('configInput').value = '';
            document.getElementById('results').style.display = 'none';

            // Stop and clean up animations
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }

            // Clean up all particles smoothly
            const trafficContainer = document.getElementById('trafficParticles');
            if (trafficContainer) {
                trafficContainer.innerHTML = '';
            }

            // Reset animation state
            isAnimationRunning = true;
            const icon = document.getElementById('animationIcon');
            const text = document.getElementById('animationText');
            if (icon) icon.textContent = '‚è∏Ô∏è';
            if (text) text.textContent = 'Pause Animation';

            closeVrfInfo();

            // Reset all data
            vrfData = [];
            connections = [];
            currentZoom = 1;
            selectedVRF = null;
            window.vrfPositions = {};

            resetZoom();
        }

        window.onload = function () {
            const sampleConfig = `vrf definition vf-branch1
 rd 64123:101
 !
 address-family ipv4
  route-target export 64123:101
  route-target export 64123:101
  route-target import 64123:102
  route-target import 64123:103
  route-target import 64123:104
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch2
 rd 64123:102
 !
 address-family ipv4
  route-target export 64123:102
  route-target export 64123:102
  route-target import 64123:101
  route-target import 64123:103
  route-target import 64123:105
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch3
 rd 64123:103
 !
 address-family ipv4
  route-target export 64123:103
  route-target export 64123:103
  route-target import 64123:101
  route-target import 64123:102
  route-target import 64123:106
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch4
 rd 64123:104
 !
 address-family ipv4
  route-target export 64123:104
  route-target export 64123:104
  route-target import 64123:101
  route-target import 64123:107
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch5
 rd 64123:105
 !
 address-family ipv4
  route-target export 64123:105
  route-target export 64123:105
  route-target import 64123:102
  route-target import 64123:106
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch6
 rd 64123:106
 !
 address-family ipv4
  route-target export 64123:106
  route-target export 64123:106
  route-target import 64123:103
  route-target import 64123:105
  route-target import 64123:107
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch7
 rd 64123:107
 !
 address-family ipv4
  route-target export 64123:107
  route-target export 64123:107
  route-target import 64123:104
  route-target import 64123:106
  route-target import 64123:108
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch8
 rd 64123:108
 !
 address-family ipv4
  route-target export 64123:108
  route-target export 64123:108
  route-target import 64123:107
  route-target import 64123:109
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch9
 rd 64123:109
 !
 address-family ipv4
  route-target export 64123:109
  route-target export 64123:109
  route-target import 64123:108
  route-target import 64123:110
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch10
 rd 64123:110
 !
 address-family ipv4
  route-target export 64123:110
  route-target export 64123:110
  route-target import 64123:109
  route-target import 64123:111
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch11
 rd 64123:111
 !
 address-family ipv4
  route-target export 64123:111
  route-target export 64123:111
  route-target import 64123:110
  route-target import 64123:112
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch12
 rd 64123:112
 !
 address-family ipv4
  route-target export 64123:112
  route-target export 64123:112
  route-target import 64123:111
  route-target import 64123:113
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch13
 rd 64123:113
 !
 address-family ipv4
  route-target export 64123:113
  route-target export 64123:113
  route-target import 64123:112
  route-target import 64123:114
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch14
 rd 64123:114
 !
 address-family ipv4
  route-target export 64123:114
  route-target export 64123:114
  route-target import 64123:113
  route-target import 64123:115
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch15
 rd 64123:115
 !
 address-family ipv4
  route-target export 64123:115
  route-target export 64123:115
  route-target import 64123:114
  route-target import 64123:116
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch16
 rd 64123:116
 !
 address-family ipv4
  route-target export 64123:116
  route-target export 64123:116
  route-target import 64123:115
  route-target import 64123:117
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch17
 rd 64123:117
 !
 address-family ipv4
  route-target export 64123:117
  route-target export 64123:117
  route-target import 64123:116
  route-target import 64123:118
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch18
 rd 64123:118
 !
 address-family ipv4
  route-target export 64123:118
  route-target export 64123:118
  route-target import 64123:117
  route-target import 64123:119
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch19
 rd 64123:119
 !
 address-family ipv4
  route-target export 64123:119
  route-target export 64123:119
  route-target import 64123:118
  route-target import 64123:120
  route-target import 64123:2000
 exit-address-family

vrf definition vf-branch20
 rd 64123:120
 !
 address-family ipv4
  route-target export 64123:120
  route-target export 64123:120
  route-target import 64123:119
  route-target import 64123:117
  route-target import 64123:2000
 exit-address-family
vrf definition vrf-shareservice
 rd 64123:2000
 !
 address-family ipv4
  route-target export 64123:2000
  route-target import 64123:101
  route-target import 64123:102
  route-target import 64123:103
  route-target import 64123:104
  route-target import 64123:105
  route-target import 64123:106
  route-target import 64123:107
  route-target import 64123:108
  route-target import 64123:109
  route-target import 64123:110
  route-target import 64123:111
  route-target import 64123:112
  route-target import 64123:113
  route-target import 64123:114
  route-target import 64123:115
  route-target import 64123:116
  route-target import 64123:117
  route-target import 64123:118
  route-target import 64123:119
  route-target import 64123:120
 exit-address-family`;

            document.getElementById('configInput').value = sampleConfig;
            generateTEConfig();
            generateQoSConfig();
            generateL2VPNConfig();
        };
    </script>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About This Platform</h2>
                <button class="close-modal" onclick="closeAboutModal()">&times;</button>
            </div>
            <div class="modal-body">
                <h3><span class="ccie-badge">Created by CCIE #58249</span></h3>
                <p>This tool developed by CCIE #58249 with extensive experience in enterprise network architecture and
                    MPLS VPN deployments.</p>

                <h3>Mission</h3>
                <p>To provide network engineers with professional-grade, free tools that simplify complex network
                    analysis tasks and improve operational efficiency.</p>

                <h3>Features</h3>
                <ul>
                    <li>Real-time VRF route-target relationship analysis</li>
                    <li>Interactive network topology visualization with zoom controls</li>
                    <li>Click any VRF node to see detailed connection information</li>
                    <li>Comprehensive connection matrix generation</li>
                    <li>CSV export for documentation and reporting</li>
                    <li>100% browser-based with complete data privacy</li>
                </ul>

            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer
        style="max-width: 1800px; margin: 30px auto 0; background: #1e3a8a; border-radius: 15px; padding: 40px 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); color: white;">
        <div style="text-align: center;">
            <h2 style="font-size: 1.8em; margin-bottom: 10px; font-weight: 700;">Advanced VRF Route-Target Traffic Flow
                Analyzer</h2>
            <p style="font-size: 1.05em; margin-bottom: 30px; opacity: 0.95;">MPLS Route Targets Traffic Flow Analysis &
                Visualization Platform</p>

            <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 25px;">
                <button onclick="openAboutModal()"
                    style="background: rgba(255, 255, 255, 0.2); color: white; text-decoration: none; padding: 12px 28px; border-radius: 10px; font-weight: 500; transition: all 0.3s; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); cursor: pointer; font-size: 1em;"
                    onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'; this.style.transform='translateY(-2px)'"
                    onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.transform='translateY(0)'">About</button>

                <a href="https://www.buymeacoffee.com/YOUR_USERNAME" target="_blank" class="coffee-btn" style="display:none;"
                    title="Support this project">
                    <svg viewBox="0 0 884 1279" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M791.109 297.518L790.231 297.002L788.201 296.383C789.018 297.072 790.04 297.472 791.109 297.518Z"
                            fill="currentColor" />
                        <path d="M803.896 388.891L802.916 389.166L803.896 388.891Z" fill="currentColor" />
                        <path
                            d="M791.484 297.377C791.359 297.361 791.237 297.332 791.118 297.29C791.111 297.371 791.111 297.453 791.118 297.534C791.252 297.516 791.379 297.462 791.484 297.377Z"
                            fill="currentColor" />
                        <path d="M791.113 297.529H791.244V297.447L791.113 297.529Z" fill="currentColor" />
                        <path d="M803.111 388.726L804.591 387.883L803.111 388.726Z" fill="currentColor" />
                        <path d="M793.669 299.515L792.223 298.138L793.669 299.515Z" fill="currentColor" />
                        <path
                            d="M430.019 1186.18C428.864 1186.68 427.852 1187.46 427.076 1188.45L427.988 1187.87C428.608 1187.3 429.485 1186.63 430.019 1186.18Z"
                            fill="currentColor" />
                        <path
                            d="M641.187 1144.63C641.187 1143.33 640.551 1143.57 640.705 1148.21C640.705 1147.84 640.86 1147.46 640.929 1147.1C641.015 1146.27 641.084 1145.46 641.187 1144.63Z"
                            fill="currentColor" />
                        <path
                            d="M619.284 1186.18C618.129 1186.68 617.118 1187.46 616.342 1188.45L617.254 1187.87C617.873 1187.3 618.751 1186.63 619.284 1186.18Z"
                            fill="currentColor" />
                        <path
                            d="M281.304 1196.06C280.427 1195.3 279.354 1194.8 278.207 1194.61C279.136 1195.06 280.065 1195.51 280.684 1195.85L281.304 1196.06Z"
                            fill="currentColor" />
                        <path
                            d="M247.841 1164.01C247.704 1162.66 247.288 1161.35 246.619 1160.16C247.093 1161.39 247.489 1162.66 247.806 1163.94L247.841 1164.01Z"
                            fill="currentColor" />
                    </svg>
                    Buy Me A Coffee
                </a>
            </div>

            <p style="font-size: 0.95em; margin-bottom: 8px; opacity: 0.9; line-height: 1.6;">This platform has been
                valuable to your network engineering operation work</p>

            <p style="font-size: 0.9em; margin: 0; opacity: 0.8;">¬© 2025 NetworkPro Toolkit - All Rights Reserved</p>
        </div>
    </footer>

    <script>
        function openAboutModal() {
            document.getElementById('aboutModal').style.display = 'block';
        }

        function closeAboutModal() {
            document.getElementById('aboutModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function (event) {
            const modal = document.getElementById('aboutModal');
            if (event.target == modal) {
                closeAboutModal();
            }
        }
    </script>
</body>

</html>
